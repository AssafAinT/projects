<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#000000"><link rel="manifest" href="/manifest.json"><link rel="shortcut icon" href="/favicon.ico"><link rel="apple-touch-icon" sizes="76x76" href="/infinity-logo.png"><title>Brain Fuel</title><link href="//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet"><link href="//fonts.googleapis.com/css?family=Roboto:400,700,300" rel="stylesheet"><link href="/static/css/2.2262d2df.chunk.css" rel="stylesheet"><link href="/static/css/main.ddcac36c.chunk.css" rel="stylesheet"><style type="text/css">.ReactPasswordStrength {
    border: 1px solid #c6c6c6;
    box-sizing: border-box;
    color: #090809;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 18px;
    line-height: 1;
    position: relative;
  }
  
  .ReactPasswordStrength-input {
    border: none;
    box-sizing: border-box;
    font-size: 18px;
    padding: 14px 0 12px 14px;
    width: calc(85% - 28px);
  }
  
  .ReactPasswordStrength-input:not(:focus).is-password-invalid { color: #D1462F; }
  .ReactPasswordStrength-input:focus { outline: none; }
  
  .ReactPasswordStrength-strength-desc {
    color: transparent;
    font-style: italic;
    padding: 14px 12px;
    position: absolute; top: 1px; right: 0;
    text-align: right;
    transition: color 250ms ease-in-out;
    width: 15%;
  }
  
  .ReactPasswordStrength.is-strength-0 .ReactPasswordStrength-strength-desc { color: #D1462F; }
  .ReactPasswordStrength.is-strength-1 .ReactPasswordStrength-strength-desc { color: #D1462F; }
  .ReactPasswordStrength.is-strength-2 .ReactPasswordStrength-strength-desc { color: #57B8FF; }
  .ReactPasswordStrength.is-strength-3 .ReactPasswordStrength-strength-desc { color: #57B8FF; }
  .ReactPasswordStrength.is-strength-4 .ReactPasswordStrength-strength-desc { color: #2FBF71; }
  
  .ReactPasswordStrength-strength-bar {
    box-sizing: border-box;
    height: 2px;
    position: relative; top: 1px; right: 1px;
    transition: width 300ms ease-out;
    width: 0;
  }
  
  .ReactPasswordStrength.is-strength-0 .ReactPasswordStrength-strength-bar {
    background: #D1462F;
    width: 20%;
  }
  
  .ReactPasswordStrength.is-strength-1 .ReactPasswordStrength-strength-bar {
    background: #D1462F;
    width: 40%;
  }
  
  .ReactPasswordStrength.is-strength-2 .ReactPasswordStrength-strength-bar {
    background: #57B8FF;
    width: 60%;
  }
  
  .ReactPasswordStrength.is-strength-3 .ReactPasswordStrength-strength-bar {
    background: #57B8FF;
    width: 80%;
  }
  
  .ReactPasswordStrength.is-strength-4 .ReactPasswordStrength-strength-bar {
    background: #2FBF71;
    width: calc(100% + 2px);
  }
  </style></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="react-notification-root "><div class="notification-container-top-left"></div><div class="notification-container-top-right"></div><div class="notification-container-bottom-left"></div><div class="notification-container-bottom-right"></div><div class="notification-container-top-center"></div><div class="notification-container-center"><div class="center-inner"></div></div><div class="notification-container-bottom-center"></div></div><div class="react-notification-root "><div class="notification-container-top-left"></div><div class="notification-container-top-right"></div><div class="notification-container-bottom-left"></div><div class="notification-container-bottom-right"></div><div class="notification-container-top-center"></div><div class="notification-container-center"><div class="center-inner"></div></div><div class="notification-container-bottom-center"></div></div><div class="materialHTML"><div class="overlay"></div><div class="background_watermark"></div><div class="user-data">ASSAF AINHOREN TESLER <br>assafain@gmail.com<br>13/9/2022</div><div class="userID-watermark">NRtCVFdUXV04Ex8APlxaUB0A</div><div class="loaded-material">
  
  
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>""</title>
    <style>
      html {
        line-height: 1.5;
        font-family: Georgia, serif;
        font-size: 20px;
        color: #1a1a1a;
        background-color: #fdfdfd;
      }
      body {
        margin: 0 auto;
        max-width: 36em;
        padding-left: 50px;
        padding-right: 50px;
        padding-top: 50px;
        padding-bottom: 50px;
        hyphens: auto;
        overflow-wrap: break-word;
        text-rendering: optimizeLegibility;
        font-kerning: normal;
      }
      @media (max-width: 600px) {
        body {
          font-size: 0.9em;
          padding: 1em;
        }
        h1 {
          font-size: 1.8em;
        }
      }
      @media print {
        body {
          background-color: transparent;
          color: black;
          font-size: 12pt;
        }
        p, h2, h3 {
          orphans: 3;
          widows: 3;
        }
        h2, h3, h4 {
          page-break-after: avoid;
        }
      }
      p {
        margin: 1em 0;
      }
      a {
        color: #1a1a1a;
      }
      a:visited {
        color: #1a1a1a;
      }
      img {
        max-width: 100%;
      }
      h1, h2, h3, h4, h5, h6 {
        margin-top: 1.4em;
      }
      h5, h6 {
        font-size: 1em;
        font-style: italic;
      }
      h6 {
        font-weight: normal;
      }
      ol, ul {
        padding-left: 1.7em;
        margin-top: 1em;
      }
      li > ol, li > ul {
        margin-top: 0;
      }
      blockquote {
        margin: 1em 0 1em 1.7em;
        padding-left: 1em;
        border-left: 2px solid #e6e6e6;
        color: #606060;
      }
      code {
        font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
        font-size: 85%;
        margin: 0;
      }
      pre {
        margin: 1em 0;
        overflow: auto;
      }
      pre code {
        padding: 0;
        overflow: visible;
        overflow-wrap: normal;
      }
      .sourceCode {
       background-color: transparent;
       overflow: visible;
      }
      hr {
        background-color: #1a1a1a;
        border: none;
        height: 1px;
        margin: 1em 0;
      }
      table {
        margin: 1em 0;
        border-collapse: collapse;
        width: 100%;
        overflow-x: auto;
        display: block;
        font-variant-numeric: lining-nums tabular-nums;
      }
      table caption {
        margin-bottom: 0.75em;
      }
      tbody {
        margin-top: 0.5em;
        border-top: 1px solid #1a1a1a;
        border-bottom: 1px solid #1a1a1a;
      }
      th {
        border-top: 1px solid #1a1a1a;
        padding: 0.25em 0.5em 0.25em 0.5em;
      }
      td {
        padding: 0.125em 0.5em 0.25em 0.5em;
      }
      header {
        margin-bottom: 4em;
        text-align: center;
      }
      #TOC li {
        list-style: none;
      }
      #TOC ul {
        padding-left: 1.3em;
      }
      #TOC > ul {
        padding-left: 0;
      }
      #TOC a:not(:hover) {
        text-decoration: none;
      }
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ff0000; font-weight: bold; } /* Alert */
      code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #7d9029; } /* Attribute */
      code span.bn { color: #40a070; } /* BaseN */
      code span.bu { } /* BuiltIn */
      code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4070a0; } /* Char */
      code span.cn { color: #880000; } /* Constant */
      code span.co { color: #60a0b0; font-style: italic; } /* Comment */
      code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #ba2121; font-style: italic; } /* Documentation */
      code span.dt { color: #902000; } /* DataType */
      code span.dv { color: #40a070; } /* DecVal */
      code span.er { color: #ff0000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #40a070; } /* Float */
      code span.fu { color: #06287e; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #007020; font-weight: bold; } /* Keyword */
      code span.op { color: #666666; } /* Operator */
      code span.ot { color: #007020; } /* Other */
      code span.pp { color: #bc7a00; } /* Preprocessor */
      code span.sc { color: #4070a0; } /* SpecialChar */
      code span.ss { color: #bb6688; } /* SpecialString */
      code span.st { color: #4070a0; } /* String */
      code span.va { color: #19177c; } /* Variable */
      code span.vs { color: #4070a0; } /* VerbatimString */
      code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
      .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    </style>
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
    <![endif]-->
  
  
  <!-- This file has been generated automatically by GSR. Edit it using GSR-Editor only. -->
  
  <h1 id="c-intro">C++ Intro</h1>
  <h2 id="investigation--exercises">Investigation &amp; Exercises</h2>
  <ol type="1">
  <li><p>​What are the types of the defined variables?</p>
  <div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1" class="link-block"><a href="#cb1-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">const</span> <span class="dt">int</span> i<span class="op">;</span> </span>
  <span id="cb1-2" class="link-block"><a href="#cb1-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> <span class="dt">const</span> i<span class="op">;</span> </span>
  <span id="cb1-3" class="link-block"><a href="#cb1-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> <span class="dt">const</span><span class="op">*</span> i<span class="op">;</span></span>
  <span id="cb1-4" class="link-block"><a href="#cb1-4" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">struct</span> X <span class="op">*</span><span class="dt">const</span> p<span class="op">;</span> </span>
  <span id="cb1-5" class="link-block"><a href="#cb1-5" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">struct</span> X <span class="dt">const</span> x1<span class="op">;</span> </span>
  <span id="cb1-6" class="link-block"><a href="#cb1-6" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">const</span> <span class="kw">struct</span> X <span class="op">*</span>p<span class="op">;</span> </span>
  <span id="cb1-7" class="link-block"><a href="#cb1-7" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">const</span> <span class="kw">struct</span> X<span class="op">*</span> <span class="op">*</span> <span class="dt">const</span> p<span class="op">;</span></span>
  <span id="cb1-8" class="link-block"><a href="#cb1-8" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> <span class="dt">const</span><span class="op">*</span> <span class="op">(*</span> <span class="dt">const</span> f <span class="op">)(</span><span class="dt">int</span><span class="op">*)=</span> foo<span class="op">;</span> </span></code></pre></div></li>
  <li><p>​Try compiling the following lines with C (without -Werror) and
  C++ compilers:</p>
  <div class="sourceCode" id="cb2"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb2-1" class="link-block"><a href="#cb2-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">enum</span> E <span class="op">{</span>AA<span class="op">,</span> BB<span class="op">,</span> CC<span class="op">,</span> DD<span class="op">};</span></span>
  <span id="cb2-2" class="link-block"><a href="#cb2-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">enum</span> E2 <span class="op">{</span>TT<span class="op">,</span> KK<span class="op">};</span></span>
  <span id="cb2-3" class="link-block"><a href="#cb2-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">enum</span> E e <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
  <span id="cb2-4" class="link-block"><a href="#cb2-4" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">enum</span> E2 e2 <span class="op">=</span> AA<span class="op">;</span></span>
  <span id="cb2-5" class="link-block"><a href="#cb2-5" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="co">// E2 e22 = KK;</span></span>
  <span id="cb2-6" class="link-block"><a href="#cb2-6" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">++</span>e<span class="op">;</span></span>
  <span id="cb2-7" class="link-block"><a href="#cb2-7" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> i <span class="op">=</span> e<span class="op">;</span></span></code></pre></div>
  <p>a. What changed with enums in C++?</p>
  <p>b. What is the value of an uninitialized enum variable?</p>
  <p>c. What are the implications?</p></li>
  <li><p>​Try playing with the new type bool:</p>
  <div class="sourceCode" id="cb3"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb3-1" class="link-block"><a href="#cb3-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">bool</span> b1 <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
  <span id="cb3-2" class="link-block"><a href="#cb3-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">bool</span> b2<span class="op">;</span></span>
  <span id="cb3-3" class="link-block"><a href="#cb3-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> i <span class="op">=</span> b1<span class="op">;</span></span>
  <span id="cb3-4" class="link-block"><a href="#cb3-4" aria-hidden="true" tabindex="-1" target="_blank"></a>i <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
  <span id="cb3-5" class="link-block"><a href="#cb3-5" aria-hidden="true" tabindex="-1" target="_blank"></a>b2 <span class="op">=</span> i<span class="op">;</span></span>
  <span id="cb3-6" class="link-block"><a href="#cb3-6" aria-hidden="true" tabindex="-1" target="_blank"></a>printf<span class="op">(</span>“<span class="op">%</span>d”<span class="op">,</span> b2<span class="op">);</span></span></code></pre></div>
  <p>a. What is the size of a Boolean variable? Is it guaranteed?</p>
  <p>b. What is the value of an uninitialized bool variable?</p>
  <p>c. What are the implications?</p>
  <p>d. Given <code>b2 = i</code>, some compilers will give a 'performance
  warning'. Why? How is this different from assigning an int to a
  character?</p></li>
  <li><p>​Look at the following code, using casting:</p>
  <div class="sourceCode" id="cb4"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb4-1" class="link-block"><a href="#cb4-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">typedef</span> <span class="kw">struct</span> List <span class="dt">List_t</span><span class="op">;</span></span>
  <span id="cb4-2" class="link-block"><a href="#cb4-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">typedef</span> <span class="kw">struct</span> Person <span class="dt">Person_t</span><span class="op">;</span></span>
  <span id="cb4-3" class="link-block"><a href="#cb4-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> foo<span class="op">(</span><span class="dt">List_t</span> <span class="op">*</span>ll<span class="op">,</span> <span class="dt">int</span> key<span class="op">,</span> <span class="dt">int</span> age<span class="op">)</span></span>
  <span id="cb4-4" class="link-block"><a href="#cb4-4" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb4-5" class="link-block"><a href="#cb4-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">void</span> <span class="op">*</span>vv <span class="op">=</span> ll_find<span class="op">(</span>ll<span class="op">,</span> key<span class="op">);</span></span>
  <span id="cb4-6" class="link-block"><a href="#cb4-6" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//We know that the list actually contains person data, so we</span></span>
  <span id="cb4-7" class="link-block"><a href="#cb4-7" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//want to convert the void pointer to Person to access it.</span></span>
  <span id="cb4-8" class="link-block"><a href="#cb4-8" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">Person_t</span> <span class="op">*</span>p <span class="op">=</span> <span class="op">(</span><span class="dt">Person_t</span><span class="op">*)</span>ll<span class="op">;</span> <span class="co">//Accidentally used ll instead of vv</span></span>
  <span id="cb4-9" class="link-block"><a href="#cb4-9" aria-hidden="true" tabindex="-1" target="_blank"></a>    p<span class="op">-&gt;</span>age <span class="op">=</span> age<span class="op">;</span></span>
  <span id="cb4-10" class="link-block"><a href="#cb4-10" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span> </span></code></pre></div>
  <p>a. What will be the results of this mistake?</p>
  <p>b. Why didn’t the compiler protect us?</p>
  <p>c. Add struct and function headers so the code will compile. Then
  replace the expression <code>(Person_t*)ll</code> with the new C++ cast
  expression <code>static_cast&lt;Person_t*&gt;(ll)</code>.</p>
  <p>d. Try compiling the erroneous code with the new casting style, fix
  the mistake and compile again. What does <code>static_cast</code>
  mean?</p>
  <p>e. Investigate and research <code>const_cast</code> and
  <code>reinterpret_cast</code>. When and how would you use each one?</p>
  <p>f. What is the type / side-effect / value of the different casting
  expressions?</p>
  <p>g. Can you still use the old C style cast in C++? Why would you want
  to?</p>
  <p>h. What is a function-style cast, and when will you use it?</p></li>
  <li><p>​Function declarations are mandatory in C++. Try calling functions
  without declarations in C and C++.</p>
  <p>a. What is the difference in behavior?</p>
  <p>b. Explain every word in the warning the C compiler gives while
  allowing this behavior.</p>
  <p>c. Having understood the warning, give an example where calling
  undeclared functions is not dangerous.</p>
  <p>d. Write 2 C examples that prove the danger of calling undeclared
  functions.</p></li>
  <li><p>​Local variables can be defined not only at the beginning of
  blocks. Try it.</p>
  <p>a. What are the advantages?</p>
  <p>b. What bugs can we prevent and never see again thanks to this
  change?</p>
  <p>c. What is required from our coding style in order to prevent these
  bugs?</p>
  <p>d. Does this mean that allocating variables on the stack is
  inefficient (requiring multiple changes to the SP)?</p></li>
  <li><p>​Operators <code>new</code> and <code>delete</code> replace the
  library functions <code>malloc()</code> and <code>free()</code>. Try
  playing with the operators:</p>
  <div class="sourceCode" id="cb5"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb5-1" class="link-block"><a href="#cb5-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">float</span> <span class="op">*</span>f <span class="op">=</span> <span class="kw">new</span> <span class="dt">float</span><span class="op">(</span><span class="fl">12.6</span><span class="op">);</span></span>
  <span id="cb5-2" class="link-block"><a href="#cb5-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">delete</span> f<span class="op">;</span></span>
  <span id="cb5-3" class="link-block"><a href="#cb5-3" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb5-4" class="link-block"><a href="#cb5-4" aria-hidden="true" tabindex="-1" target="_blank"></a>f <span class="op">=</span> <span class="kw">new</span> <span class="dt">float</span><span class="op">[</span><span class="dv">15</span><span class="op">];</span></span>
  <span id="cb5-5" class="link-block"><a href="#cb5-5" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">delete</span><span class="op">[]</span> f<span class="op">;</span></span></code></pre></div>
  <p>a. How do <code>new</code> / <code>delete</code> prevent bugs (common
  with <code>malloc</code> / <code>free</code>)? Write examples.</p>
  <p>b. If <code>new</code> is an operator, what is the type, side-effect
  and value of the expression created with it?</p>
  <p>c. It is safe to delete <code>0</code>? What is this good for?</p>
  <p>d. Was it safe to free <code>0</code>?</p>
  <p>e. Try mixing the old and new ways. What happens? Why? Will it always
  behave in the same way?</p>
  <div class="sourceCode" id="cb6"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb6-1" class="link-block"><a href="#cb6-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span>malloc<span class="op">(</span><span class="dv">1000</span> <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
  <span id="cb6-2" class="link-block"><a href="#cb6-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">delete</span> ptr<span class="op">;</span></span>
  <span id="cb6-3" class="link-block"><a href="#cb6-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> <span class="op">*</span>ptr2 <span class="op">=</span> <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span><span class="dv">1000</span><span class="op">];</span></span>
  <span id="cb6-4" class="link-block"><a href="#cb6-4" aria-hidden="true" tabindex="-1" target="_blank"></a>free<span class="op">(</span>ptr<span class="op">);</span></span></code></pre></div></li>
  <li><p>​For input and output <strong>&lt;iostream&gt;</strong> (no
  <strong>.h</strong>) replaces <strong>&lt;stdio.h&gt;</strong>. Try
  playing with I/O:</p>
  <div class="sourceCode" id="cb7"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb7-1" class="link-block"><a href="#cb7-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> <span class="st">"ksjdkfjfk"</span> <span class="op">&lt;&lt;</span> i <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
  <span id="cb7-2" class="link-block"><a href="#cb7-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="bu">std::</span>cin<span class="op"> &gt;&gt;</span> i<span class="op">;</span></span>
  <span id="cb7-3" class="link-block"><a href="#cb7-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="bu">std::</span>cerr<span class="op"> &lt;&lt;</span> <span class="st">"ksjdkfjfk"</span> <span class="op">&lt;&lt;</span> i<span class="op">;</span></span></code></pre></div></li>
  <li><p>​Default parameters – a function declared like
  <code>void foo(int, int i = 3, float = 4);</code> can be called in these
  ways:</p>
  <div class="sourceCode" id="cb8"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb8-1" class="link-block"><a href="#cb8-1" aria-hidden="true" tabindex="-1" target="_blank"></a>foo<span class="op">(</span><span class="dv">3</span><span class="op">);</span></span>
  <span id="cb8-2" class="link-block"><a href="#cb8-2" aria-hidden="true" tabindex="-1" target="_blank"></a>foo<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
  <span id="cb8-3" class="link-block"><a href="#cb8-3" aria-hidden="true" tabindex="-1" target="_blank"></a>foo<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="fl">8.7</span><span class="op">);</span></span></code></pre></div>
  <p>a. What is this feature good for?</p>
  <p>b. Create some working code using this.</p>
  <p>c. How does the function know whether to use the defaults or the
  parameters on stack?</p>
  <p>d. Can you call <code>foo</code> with only the first and third
  parameter? Why is this a problem?</p></li>
  <li><p>​// Comments</p>
  <p>a. How are C++ comments different from C comments?</p>
  <p>b. Can we still use C comments? Why would we?</p></li>
  <li><p>​Refamiliarize with build process and shared objects (implicit and
  explicit) before moving on.</p></li>
  <li><p>​Function overloading</p>
  <div class="sourceCode" id="cb9"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb9-1" class="link-block"><a href="#cb9-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">()</span> <span class="op">{}</span></span>
  <span id="cb9-2" class="link-block"><a href="#cb9-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">(</span><span class="dt">int</span> i<span class="op">)</span> <span class="op">{};</span></span>
  <span id="cb9-3" class="link-block"><a href="#cb9-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{};</span>  </span></code></pre></div>
  <p>a. Add <code>main()</code> and try calling <code>Foo()</code> with
  different parameter types. Which one is called for each type?</p>
  <p>b. What is this good for? What are the dangers?</p>
  <p>c. Try a pointer, float, null, unsigned char. Explain the different
  behaviors and error messages.</p>
  <p>d. Create a shared object with some functions in C++.</p>
  <p>e. Look at the nm output. How is this a problem for explicitly
  loading this shared object?</p>
  <p>f. Connect to it explicitly (<code>dlopen</code>, <code>dlsym</code>)
  and call the functions from <code>main()</code> compiled in C and
  C++.</p>
  <p>g. How did you solve the problem? Find a better solution.</p>
  <p>h. Create a shared object in C and <em>explicitly</em> connect to it
  from C++.</p>
  <p>i. Create a shared object in C and <em>implicitly</em> connect to it
  from C and C++ using the same header file.</p></li>
  <li><p>​Namespaces let us divide the global namespace into
  sub-namespaces. Look at the following example to get familiar with the
  feature. Compile it and look at the output of nm.</p>
  <div class="sourceCode" id="cb10"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb10-1" class="link-block"><a href="#cb10-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">namespace</span> useless</span>
  <span id="cb10-2" class="link-block"><a href="#cb10-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb10-3" class="link-block"><a href="#cb10-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">unsigned</span> <span class="dt">int</span> <span class="va">g_wasteful</span><span class="op">[</span><span class="dv">400</span><span class="op">];</span></span>
  <span id="cb10-4" class="link-block"><a href="#cb10-4" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="at">extern</span> <span class="dt">int</span> <span class="va">g_notthere</span><span class="op">;</span></span>
  <span id="cb10-5" class="link-block"><a href="#cb10-5" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">()</span> <span class="op">{}</span></span>
  <span id="cb10-6" class="link-block"><a href="#cb10-6" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb10-7" class="link-block"><a href="#cb10-7" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">namespace</span> wasteoftyme</span>
  <span id="cb10-8" class="link-block"><a href="#cb10-8" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb10-9" class="link-block"><a href="#cb10-9" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">()</span> <span class="op">{};</span></span>
  <span id="cb10-10" class="link-block"><a href="#cb10-10" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span><span class="co">//namespace wasteoftyme</span></span>
  <span id="cb10-11" class="link-block"><a href="#cb10-11" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span><span class="co">//namespace useless</span></span>
  <span id="cb10-12" class="link-block"><a href="#cb10-12" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb10-13" class="link-block"><a href="#cb10-13" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">namespace</span> stupid</span>
  <span id="cb10-14" class="link-block"><a href="#cb10-14" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb10-15" class="link-block"><a href="#cb10-15" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">()</span> <span class="op">{}</span></span>
  <span id="cb10-16" class="link-block"><a href="#cb10-16" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Bar<span class="op">()</span> <span class="op">{}</span></span>
  <span id="cb10-17" class="link-block"><a href="#cb10-17" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> DoNothing<span class="op">(</span><span class="dt">unsigned</span> <span class="dt">int</span><span class="op">)</span> <span class="op">{}</span></span>
  <span id="cb10-18" class="link-block"><a href="#cb10-18" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span><span class="co">//namespace stupid</span></span>
  <span id="cb10-19" class="link-block"><a href="#cb10-19" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb10-20" class="link-block"><a href="#cb10-20" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">namespace</span> useless</span>
  <span id="cb10-21" class="link-block"><a href="#cb10-21" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb10-22" class="link-block"><a href="#cb10-22" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> DoNothing<span class="op">(</span><span class="dt">int</span><span class="op">)</span> <span class="op">{}</span></span>
  <span id="cb10-23" class="link-block"><a href="#cb10-23" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span><span class="co">//namespace useless</span></span>
  <span id="cb10-24" class="link-block"><a href="#cb10-24" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb10-25" class="link-block"><a href="#cb10-25" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">using</span> <span class="kw">namespace</span> useless<span class="op">;</span></span>
  <span id="cb10-26" class="link-block"><a href="#cb10-26" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb10-27" class="link-block"><a href="#cb10-27" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> DoStuff<span class="op">()</span></span>
  <span id="cb10-28" class="link-block"><a href="#cb10-28" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb10-29" class="link-block"><a href="#cb10-29" aria-hidden="true" tabindex="-1" target="_blank"></a>    stupid<span class="op">::</span>Bar<span class="op">();</span></span>
  <span id="cb10-30" class="link-block"><a href="#cb10-30" aria-hidden="true" tabindex="-1" target="_blank"></a>    Foo<span class="op">();</span></span>
  <span id="cb10-31" class="link-block"><a href="#cb10-31" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">using</span> stupid<span class="op">::</span>Foo<span class="op">;</span></span>
  <span id="cb10-32" class="link-block"><a href="#cb10-32" aria-hidden="true" tabindex="-1" target="_blank"></a>    Foo<span class="op">();</span></span>
  <span id="cb10-33" class="link-block"><a href="#cb10-33" aria-hidden="true" tabindex="-1" target="_blank"></a>    DoNothing<span class="op">(</span><span class="va">g_wasteful</span><span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
  <span id="cb10-34" class="link-block"><a href="#cb10-34" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb10-35" class="link-block"><a href="#cb10-35" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb10-36" class="link-block"><a href="#cb10-36" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">()</span> <span class="op">{}</span></span>
  <span id="cb10-37" class="link-block"><a href="#cb10-37" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb10-38" class="link-block"><a href="#cb10-38" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">using</span> <span class="kw">namespace</span> stupid<span class="op">;</span></span>
  <span id="cb10-39" class="link-block"><a href="#cb10-39" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb10-40" class="link-block"><a href="#cb10-40" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">namespace</span> comeon <span class="op">=</span> useless<span class="op">::</span>wasteoftyme<span class="op">;</span></span>
  <span id="cb10-41" class="link-block"><a href="#cb10-41" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb10-42" class="link-block"><a href="#cb10-42" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> DoMoreStuff<span class="op">()</span></span>
  <span id="cb10-43" class="link-block"><a href="#cb10-43" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb10-44" class="link-block"><a href="#cb10-44" aria-hidden="true" tabindex="-1" target="_blank"></a>    comeon<span class="op">::</span>Foo<span class="op">();</span></span>
  <span id="cb10-45" class="link-block"><a href="#cb10-45" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//Foo(); //try uncommenting this line, solve the error</span></span>
  <span id="cb10-46" class="link-block"><a href="#cb10-46" aria-hidden="true" tabindex="-1" target="_blank"></a>    Bar<span class="op">();</span> <span class="co">//why doesn't this line create an error?</span></span>
  <span id="cb10-47" class="link-block"><a href="#cb10-47" aria-hidden="true" tabindex="-1" target="_blank"></a>    DoNothing<span class="op">(</span><span class="va">g_wasteful</span><span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
  <span id="cb10-48" class="link-block"><a href="#cb10-48" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb10-49" class="link-block"><a href="#cb10-49" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb10-50" class="link-block"><a href="#cb10-50" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">namespace</span> useless</span>
  <span id="cb10-51" class="link-block"><a href="#cb10-51" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb10-52" class="link-block"><a href="#cb10-52" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> DoUselessStuff<span class="op">()</span></span>
  <span id="cb10-53" class="link-block"><a href="#cb10-53" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb10-54" class="link-block"><a href="#cb10-54" aria-hidden="true" tabindex="-1" target="_blank"></a>    DoNothing<span class="op">(</span><span class="va">g_wasteful</span><span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
  <span id="cb10-55" class="link-block"><a href="#cb10-55" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb10-56" class="link-block"><a href="#cb10-56" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span><span class="co">//namespace useless</span></span></code></pre></div>
  <p>a. What is the scope of a <code>using</code> declaration?</p>
  <p>b. What namespaces did C support?</p>
  <p>c. What is "name hiding" in C? How do namespaces help solve this
  problem?</p>
  <p>d. What does <code>using</code> do?</p>
  <p>e. What will happen if we use <code>using</code> declarations in a
  header file?</p>
  <p>f. The function <code>Foo()</code> is called in different places in
  the code. Explain which version is called, and why.</p>
  <p>g. Do the same for <code>DoNothing()</code>.</p>
  <p>h. Uncomment the call to <code>Foo()</code> in
  <code>DoMoreStuff()</code>, and explain <em>every word</em> in the error
  message.</p>
  <p>i. Fix the line to call <em>all</em> versions of
  <code>Foo() </code>.</p>
  <p>j. How do namespaces play with preprocessor directives?</p></li>
  <li><p>​Const and literals: Try compiling and running the following code
  as C and as C++. Try using different compilers.</p>
  <div class="sourceCode" id="cb11"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb11-1" class="link-block"><a href="#cb11-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb11-2" class="link-block"><a href="#cb11-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb11-3" class="link-block"><a href="#cb11-3" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="at">const</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
  <span id="cb11-4" class="link-block"><a href="#cb11-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="op">*</span>ip <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)&amp;</span>i<span class="op">;</span></span>
  <span id="cb11-5" class="link-block"><a href="#cb11-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">*</span>ip <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
  <span id="cb11-6" class="link-block"><a href="#cb11-6" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//int arr[i];</span></span>
  <span id="cb11-7" class="link-block"><a href="#cb11-7" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb11-8" class="link-block"><a href="#cb11-8" aria-hidden="true" tabindex="-1" target="_blank"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> i<span class="op">,</span> <span class="op">*</span>ip<span class="op">);</span></span>
  <span id="cb11-9" class="link-block"><a href="#cb11-9" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb11-10" class="link-block"><a href="#cb11-10" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>a. Explain the different behaviors.</p>
  <p>b. Move the definition of <code>i</code> to the global scope, and
  explain the result.</p>
  <p>c. Add definitions of global const and non-const variables –
  investigate with nm.</p>
  <p>d. Uncomment the commented line, compile with C and C++, and explain
  the result</p>
  <p>e. What feature of C can we stop using now? What are the
  advantages?</p></li>
  <li><p>​Inline functions: Compile this function and look at the nm
  output.</p>
  <div class="sourceCode" id="cb12"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb12-1" class="link-block"><a href="#cb12-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">inline</span> <span class="dt">void</span> foo<span class="op">()</span></span>
  <span id="cb12-2" class="link-block"><a href="#cb12-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb12-3" class="link-block"><a href="#cb12-3" aria-hidden="true" tabindex="-1" target="_blank"></a>    cout <span class="op">&lt;&lt;</span> <span class="st">"Hello-World"</span><span class="op">;</span></span>
  <span id="cb12-4" class="link-block"><a href="#cb12-4" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>a. Add a call to the function and see if the nm output changes.</p>
  <p>b. Now add the <code>-O</code> option (capital O, not zero) and look
  at nm again.</p>
  <p>c. What does inline mean? What does <code>-O</code> do? Explain the
  differences in nm output.</p>
  <p>d. Put the function <em>definition</em> in a header file and call the
  function from 2 different compilation units. Look at nm, and look at the
  linker output. Try the same thing without the <em>inline</em> reserved
  word.</p></li>
  <li><p>​Template functions: Try the following code.</p>
  <div class="sourceCode" id="cb13"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb13-1" class="link-block"><a href="#cb13-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span> </span>
  <span id="cb13-2" class="link-block"><a href="#cb13-2" aria-hidden="true" tabindex="-1" target="_blank"></a>T Max<span class="op">(</span>T t1<span class="op">,</span> T t2<span class="op">)</span> </span>
  <span id="cb13-3" class="link-block"><a href="#cb13-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb13-4" class="link-block"><a href="#cb13-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="op">(</span>t1 <span class="op">&gt;</span> t2<span class="op">)</span> <span class="op">?</span> t1 <span class="op">:</span> t2<span class="op">;</span>  </span>
  <span id="cb13-5" class="link-block"><a href="#cb13-5" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span> </span>
  <span id="cb13-6" class="link-block"><a href="#cb13-6" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb13-7" class="link-block"><a href="#cb13-7" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span> </span>
  <span id="cb13-8" class="link-block"><a href="#cb13-8" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb13-9" class="link-block"><a href="#cb13-9" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">12</span><span class="op">];</span> </span>
  <span id="cb13-10" class="link-block"><a href="#cb13-10" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb13-11" class="link-block"><a href="#cb13-11" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> Max<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;(</span><span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">" "</span> <span class="op">&lt;&lt;</span> Max<span class="op">&lt;</span><span class="dt">double</span><span class="op">&gt;(</span><span class="fl">3.7</span><span class="op">,</span> <span class="fl">12.9</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">" "</span><span class="op">;</span></span>
  <span id="cb13-12" class="link-block"><a href="#cb13-12" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> Max<span class="op">&lt;</span><span class="dt">int</span><span class="op">*&gt;(</span>arr<span class="op">,</span> arr <span class="op">+</span> <span class="dv">8</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
  <span id="cb13-13" class="link-block"><a href="#cb13-13" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> Max<span class="op">(</span>‘a’<span class="op">,</span> ‘b’<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span> </span>
  <span id="cb13-14" class="link-block"><a href="#cb13-14" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> </span>
  <span id="cb13-15" class="link-block"><a href="#cb13-15" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>a. Look at nm. Remove all the calls to the function, and look at nm
  again. What is the difference?</p>
  <p>b. Try adding other calls with different types. What happens?</p>
  <p>c. Try putting the template function definition in a header file and
  calling it with the same type from different C++ files. Look at nm.</p>
  <p>d. Look at the line with <code>'a'</code> and<code> 'b'</code>:</p>
  <ul>
  <li>How is it different from the others?</li>
  <li>How does it work?</li>
  <li>What is the motivation behind this feature?</li>
  <li>What is required for it to work?</li>
  </ul>
  <p>e. Remove all <em>calls</em> to the function, and then remove the
  <code>return</code> keyword from <code>Max</code>.</p>
  <ul>
  <li>If you don't call a template function, is it being compiled?</li>
  <li>Add to <code>Max()</code> an error line <code>x = 5</code>
  (<code>x</code> without a type). What happens?</li>
  <li>If <code>Max()</code> is not being compiled, why do you get an
  error?</li>
  <li>Remove the <code>x = 5</code> and restore the calls to
  <code>Max()</code> to the way they were.</li>
  </ul>
  <p>f. In order for the code generated (<em>instantiated</em>) from the
  template to compile, what does the type represented by <code>T</code>
  have to look like (what operations does it have to support)?</p>
  <p>g. What happens to a template function declaration and definition
  call at every stage of the build process?</p></li>
  <li><p>​Overloading regular functions and function templates: Sometimes
  the generic solution is not good enough for a specific type, and we want
  to replace it just for that specific type.</p>
  <p>a. Run the following code:</p>
  <div class="sourceCode" id="cb14"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb14-1" class="link-block"><a href="#cb14-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">template</span><span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span></span>
  <span id="cb14-2" class="link-block"><a href="#cb14-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> foo<span class="op">(</span>T t<span class="op">)</span></span>
  <span id="cb14-3" class="link-block"><a href="#cb14-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span>    </span>
  <span id="cb14-4" class="link-block"><a href="#cb14-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> t <span class="op">&lt;&lt;</span> <span class="st">" Generic foo for "</span> <span class="op">&lt;&lt;</span> <span class="kw">typeid</span><span class="op">(</span>t<span class="op">).</span>name<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op"> ;</span></span>
  <span id="cb14-5" class="link-block"><a href="#cb14-5" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb14-6" class="link-block"><a href="#cb14-6" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb14-7" class="link-block"><a href="#cb14-7" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> foo<span class="op">(</span><span class="dt">int</span> t<span class="op">)</span></span>
  <span id="cb14-8" class="link-block"><a href="#cb14-8" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb14-9" class="link-block"><a href="#cb14-9" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> t <span class="op">&lt;&lt;</span> <span class="st">" Specialized foo (for int param)</span><span class="sc">\n</span><span class="st">"</span><span class="op">;</span></span>
  <span id="cb14-10" class="link-block"><a href="#cb14-10" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb14-11" class="link-block"><a href="#cb14-11" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb14-12" class="link-block"><a href="#cb14-12" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb14-13" class="link-block"><a href="#cb14-13" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb14-14" class="link-block"><a href="#cb14-14" aria-hidden="true" tabindex="-1" target="_blank"></a>    foo<span class="op">(</span><span class="fl">4.2</span><span class="op">);</span></span>
  <span id="cb14-15" class="link-block"><a href="#cb14-15" aria-hidden="true" tabindex="-1" target="_blank"></a>    foo<span class="op">(</span><span class="dv">5</span><span class="op">);</span></span>
  <span id="cb14-16" class="link-block"><a href="#cb14-16" aria-hidden="true" tabindex="-1" target="_blank"></a>    foo<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;(</span><span class="dv">5</span><span class="op">);</span></span>
  <span id="cb14-17" class="link-block"><a href="#cb14-17" aria-hidden="true" tabindex="-1" target="_blank"></a> </span>
  <span id="cb14-18" class="link-block"><a href="#cb14-18" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb14-19" class="link-block"><a href="#cb14-19" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>b. What is the problem?</p>
  <p>c. Research and investigate template specializations and solve the
  problem.</p>
  <p>d. In what file should a template specialization be
  implemented?</p></li>
  <li><p>​C++ has a new type of variables that are aliases to other
  variables. Try the following code:</p>
  <div class="sourceCode" id="cb15"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb15-1" class="link-block"><a href="#cb15-1" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> i<span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
  <span id="cb15-2" class="link-block"><a href="#cb15-2" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span><span class="op">&amp;</span> ip<span class="op">=</span> i<span class="op">;</span></span>
  <span id="cb15-3" class="link-block"><a href="#cb15-3" aria-hidden="true" tabindex="-1" target="_blank"></a>    ip<span class="op">=</span> <span class="dv">9</span><span class="op">;</span></span>
  <span id="cb15-4" class="link-block"><a href="#cb15-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op">&lt;&lt;</span> i<span class="op">&lt;&lt;</span><span class="bu">std::</span>endl<span class="op">;</span></span></code></pre></div>
  <p>a. Try references to other types.</p>
  <p>b. Experiment with references as variables, parameters, return values
  and struct fields.</p>
  <p>c. What is the size of a reference variable?</p>
  <p>d. Try printing the address of a reference variable. Explain.</p>
  <p>e. In C, what are all the different reasons to use pointers?</p>
  <p>f. Can and should references replace all our uses of pointers? How
  and why is this? (Provide for each of the different reasons per question
  17e.)</p>
  <p>g. Non-const reference parameters are evil. Why?</p></li>
  <li><p>​Reference parameters: With the following declarations, answer the
  following questions:</p>
  <div class="sourceCode" id="cb16"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb16-1" class="link-block"><a href="#cb16-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">(</span><span class="at">const</span> <span class="dt">double</span><span class="op">&amp;);</span></span>
  <span id="cb16-2" class="link-block"><a href="#cb16-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Bar<span class="op">(</span><span class="dt">double</span><span class="op">&amp;);</span></span></code></pre></div>
  <p>a. Try calling both functions with a variable of type
  <code>int</code>. Why is there a difference?</p>
  <p>b. Use <code>reinterpret_cast</code> to force the code to
  compile.</p>
  <p>c. What does it actually do? Do we want this behavior?</p>
  <p>d. Implement the functions to print their parameter’s addresses and
  values, and explain the behavior.</p></li>
  <li><p>​Ctors</p>
  <p>In C many structs were accompanied by initialization and
  deinitialization functions that the user of the struct had to call
  before and after using it. Sometimes it was necessary to provide special
  copy functions instead of the standard copy initialization and
  assignment.</p>
  <p>Many bugs in C are a result of failing to call these functions every
  time a variable was initialized, copied, and released. C++ solves this
  problem by removing the responsibility for calling these functions from
  the programmers that use the structures.</p>
  <p>The programmer writing the struct uses a special syntax to “teach”
  the compiler which functions must be called when a struct is created,
  destroyed, or copied – and they will be called automatically whenever
  the users do any of those actions. Try the following code:</p>
  <div class="sourceCode" id="cb17"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb17-1" class="link-block"><a href="#cb17-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
  <span id="cb17-2" class="link-block"><a href="#cb17-2" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb17-3" class="link-block"><a href="#cb17-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">struct</span> X</span>
  <span id="cb17-4" class="link-block"><a href="#cb17-4" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb17-5" class="link-block"><a href="#cb17-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">explicit</span> X<span class="op">();</span> <span class="co">// Initialization function without parameters is named default constructor (often abbreviated as: default ctor).</span></span>
  <span id="cb17-6" class="link-block"><a href="#cb17-6" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">explicit</span> X<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span><span class="op">,</span> <span class="dt">int</span> <span class="va">b_</span> <span class="op">=</span> <span class="dv">8</span><span class="op">);</span> <span class="co">// Regular (non default) Ctor.</span></span>
  <span id="cb17-7" class="link-block"><a href="#cb17-7" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">~</span>X<span class="op">();</span> <span class="co">//Deinitialization function is called destructor (Dtor).</span></span>
  <span id="cb17-8" class="link-block"><a href="#cb17-8" aria-hidden="true" tabindex="-1" target="_blank"></a>    X<span class="op">(</span><span class="at">const</span> X<span class="op">&amp;</span> <span class="va">other_</span><span class="op">);</span> <span class="co">//Copy initialization function is called copy costructor or CCtor.</span></span>
  <span id="cb17-9" class="link-block"><a href="#cb17-9" aria-hidden="true" tabindex="-1" target="_blank"></a>    X<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span><span class="at">const</span> X<span class="op">&amp;</span> <span class="va">other_</span><span class="op">);</span> <span class="co">//Assignment operator.</span></span>
  <span id="cb17-10" class="link-block"><a href="#cb17-10" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb17-11" class="link-block"><a href="#cb17-11" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb17-12" class="link-block"><a href="#cb17-12" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="at">const</span> <span class="dt">int</span> <span class="va">m_b</span><span class="op">;</span></span>
  <span id="cb17-13" class="link-block"><a href="#cb17-13" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb17-14" class="link-block"><a href="#cb17-14" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb17-15" class="link-block"><a href="#cb17-15" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::</span>X<span class="op">():</span> <span class="va">m_a</span><span class="op">(</span><span class="dv">3</span><span class="op">),</span> <span class="va">m_b</span><span class="op">(</span><span class="dv">4</span><span class="op">)</span> <span class="co">//Implementation of the default Ctor. Why the X::X? The code after the colon is called an initialization list.</span></span>
  <span id="cb17-16" class="link-block"><a href="#cb17-16" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb17-17" class="link-block"><a href="#cb17-17" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">// m_a = 3; </span></span>
  <span id="cb17-18" class="link-block"><a href="#cb17-18" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">// m_b = 4;</span></span>
  <span id="cb17-19" class="link-block"><a href="#cb17-19" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> <span class="st">"this:"</span> <span class="op">&lt;&lt;</span> <span class="kw">this</span> <span class="op">&lt;&lt;</span></span>
  <span id="cb17-20" class="link-block"><a href="#cb17-20" aria-hidden="true" tabindex="-1" target="_blank"></a>            <span class="st">" X default Ctor. m_a:"</span> <span class="op">&lt;&lt;</span> <span class="va">m_a</span> <span class="op">&lt;&lt;</span> </span>
  <span id="cb17-21" class="link-block"><a href="#cb17-21" aria-hidden="true" tabindex="-1" target="_blank"></a>            <span class="st">" m_b:"</span> <span class="op">&lt;&lt;</span> <span class="va">m_b</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
  <span id="cb17-22" class="link-block"><a href="#cb17-22" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb17-23" class="link-block"><a href="#cb17-23" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb17-24" class="link-block"><a href="#cb17-24" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::</span>X<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span><span class="op">,</span> <span class="dt">int</span> <span class="va">b_</span><span class="op">):</span> <span class="va">m_a</span><span class="op">(</span><span class="va">a_</span><span class="op">),</span> <span class="va">m_b</span><span class="op">(</span><span class="va">b_</span><span class="op">)</span> <span class="co">//Implementation of the second Ctor. </span></span>
  <span id="cb17-25" class="link-block"><a href="#cb17-25" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb17-26" class="link-block"><a href="#cb17-26" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op">&lt;&lt;</span> <span class="st">"this:"</span> <span class="op">&lt;&lt;</span> <span class="kw">this</span> <span class="op">&lt;&lt;</span></span>
  <span id="cb17-27" class="link-block"><a href="#cb17-27" aria-hidden="true" tabindex="-1" target="_blank"></a>        <span class="st">" X int int Ctor. m_a:"</span> <span class="op">&lt;&lt;</span> <span class="va">m_a</span> <span class="op">&lt;&lt;</span> </span>
  <span id="cb17-28" class="link-block"><a href="#cb17-28" aria-hidden="true" tabindex="-1" target="_blank"></a>        <span class="st">" m_b:"</span> <span class="op">&lt;&lt;</span> <span class="va">m_b</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
  <span id="cb17-29" class="link-block"><a href="#cb17-29" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb17-30" class="link-block"><a href="#cb17-30" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb17-31" class="link-block"><a href="#cb17-31" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::</span>X<span class="op">(</span><span class="at">const</span> X<span class="op">&amp;</span> <span class="va">other_</span><span class="op">):</span> <span class="va">m_a</span><span class="op">(</span><span class="va">other_</span><span class="op">.</span><span class="va">m_a</span><span class="op">),</span> <span class="va">m_b</span><span class="op">(</span><span class="va">other_</span><span class="op">.</span><span class="va">m_b</span><span class="op">)</span> <span class="co">//Implementation of the copy Ctor.</span></span>
  <span id="cb17-32" class="link-block"><a href="#cb17-32" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb17-33" class="link-block"><a href="#cb17-33" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op">&lt;&lt;</span> <span class="st">"this:"</span> <span class="op">&lt;&lt;</span> <span class="kw">this</span> <span class="op">&lt;&lt;</span></span>
  <span id="cb17-34" class="link-block"><a href="#cb17-34" aria-hidden="true" tabindex="-1" target="_blank"></a>        <span class="st">" X copy Ctor. m_a:"</span> <span class="op">&lt;&lt;</span> <span class="va">m_a</span> <span class="op">&lt;&lt;</span> </span>
  <span id="cb17-35" class="link-block"><a href="#cb17-35" aria-hidden="true" tabindex="-1" target="_blank"></a>        <span class="st">" m_b:"</span> <span class="op">&lt;&lt;</span> <span class="va">m_b</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
  <span id="cb17-36" class="link-block"><a href="#cb17-36" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb17-37" class="link-block"><a href="#cb17-37" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb17-38" class="link-block"><a href="#cb17-38" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">&amp;</span> X<span class="op">::</span><span class="kw">operator</span><span class="op">=(</span><span class="at">const</span> X<span class="op">&amp;</span> <span class="va">other_</span><span class="op">)</span></span>
  <span id="cb17-39" class="link-block"><a href="#cb17-39" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb17-40" class="link-block"><a href="#cb17-40" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="va">m_a</span><span class="op">=</span> <span class="va">other_</span><span class="op">.</span><span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb17-41" class="link-block"><a href="#cb17-41" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//  m_b= other_.m_b;</span></span>
  <span id="cb17-42" class="link-block"><a href="#cb17-42" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> <span class="st">"this:"</span> <span class="op">&lt;&lt;</span> <span class="kw">this</span> <span class="op">&lt;&lt;</span></span>
  <span id="cb17-43" class="link-block"><a href="#cb17-43" aria-hidden="true" tabindex="-1" target="_blank"></a>        <span class="st">" X assignment operator. m_a:"</span> <span class="op">&lt;&lt;</span> <span class="va">m_a</span> <span class="op">&lt;&lt;</span> </span>
  <span id="cb17-44" class="link-block"><a href="#cb17-44" aria-hidden="true" tabindex="-1" target="_blank"></a>        <span class="st">" does not change m_b:"</span> <span class="op">&lt;&lt;</span> <span class="va">m_b</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span>    </span>
  <span id="cb17-45" class="link-block"><a href="#cb17-45" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
  <span id="cb17-46" class="link-block"><a href="#cb17-46" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb17-47" class="link-block"><a href="#cb17-47" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb17-48" class="link-block"><a href="#cb17-48" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::~</span>X<span class="op">()</span></span>
  <span id="cb17-49" class="link-block"><a href="#cb17-49" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb17-50" class="link-block"><a href="#cb17-50" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> <span class="st">"this:"</span> <span class="op">&lt;&lt;</span> <span class="kw">this</span> <span class="op">&lt;&lt;</span></span>
  <span id="cb17-51" class="link-block"><a href="#cb17-51" aria-hidden="true" tabindex="-1" target="_blank"></a>        <span class="st">" X Dtor. m_a:"</span> <span class="op">&lt;&lt;</span> <span class="va">m_a</span> <span class="op">&lt;&lt;</span> </span>
  <span id="cb17-52" class="link-block"><a href="#cb17-52" aria-hidden="true" tabindex="-1" target="_blank"></a>        <span class="st">" m_b:"</span> <span class="op">&lt;&lt;</span> <span class="va">m_b</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span>    </span>
  <span id="cb17-53" class="link-block"><a href="#cb17-53" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb17-54" class="link-block"><a href="#cb17-54" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb17-55" class="link-block"><a href="#cb17-55" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb17-56" class="link-block"><a href="#cb17-56" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x1<span class="op">;</span></span>
  <span id="cb17-57" class="link-block"><a href="#cb17-57" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x2<span class="op">(</span><span class="dv">7</span><span class="op">);</span></span>
  <span id="cb17-58" class="link-block"><a href="#cb17-58" aria-hidden="true" tabindex="-1" target="_blank"></a>    X <span class="op">*</span>px <span class="op">=</span> <span class="kw">new</span> X<span class="op">(</span>x2<span class="op">);</span></span>
  <span id="cb17-59" class="link-block"><a href="#cb17-59" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x3<span class="op">(</span><span class="dv">9</span><span class="op">,</span><span class="dv">10</span><span class="op">);</span></span>
  <span id="cb17-60" class="link-block"><a href="#cb17-60" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x4<span class="op">(</span>x1<span class="op">);</span></span>
  <span id="cb17-61" class="link-block"><a href="#cb17-61" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb17-62" class="link-block"><a href="#cb17-62" aria-hidden="true" tabindex="-1" target="_blank"></a>    x1 <span class="op">=</span> x3<span class="op">;</span></span>
  <span id="cb17-63" class="link-block"><a href="#cb17-63" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb17-64" class="link-block"><a href="#cb17-64" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">delete</span> px<span class="op">;</span> px <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb17-65" class="link-block"><a href="#cb17-65" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb17-66" class="link-block"><a href="#cb17-66" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb17-67" class="link-block"><a href="#cb17-67" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>a. Investigate and understand all the syntax. Use nm.</p>
  <p>b. Use the debugger to understand what's happening. What does
  <code>“this”</code> mean?</p>
  <p>c. How does the existence of these functions influence the size of a
  struct?</p>
  <p>d. Notice the calling order of Ctors and Dtors of local
  variables.</p>
  <p>e. Why can we have multiple constructors? How does the compiler know
  which constructor it should call?</p>
  <p>f. Can the default Ctor have parameters? Why is it called the
  "default Ctor"?</p>
  <p>g. Look at the commented lines in the Ctor. How are they different
  from using the initialization list?</p>
  <p>h. Try to use them instead of the initialization list. Explain the
  result.</p>
  <p>i. Why do we need the initialization list? Should we split
  initialization between it and the body?</p>
  <p>j. How is the memory for <code>x1</code>, <code>x2</code>,
  <code>x3</code>, <code>x4</code> allocated? How is it released?</p>
  <p>k. When is it allocated and deallocated? How can you find out?</p>
  <p>l. Where is this done?</p>
  <p>m. When is memory allocated for <code>px</code>?</p>
  <p>n. Describe the Ctor's part in allocating memory for the object.</p>
  <p>o. What does the Dtor in the above code do?</p></li>
  <li><p>​Add the following lines to main (previous example):</p>
  <div class="sourceCode" id="cb18"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb18-1" class="link-block"><a href="#cb18-1" aria-hidden="true" tabindex="-1" target="_blank"></a>    X<span class="op">*</span> xp<span class="op">=</span> <span class="kw">new</span> X<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
  <span id="cb18-2" class="link-block"><a href="#cb18-2" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">delete</span><span class="op">[]</span> xp<span class="op">;</span></span></code></pre></div>
  <p>a. Use the debugger to investigate the order of construction and
  destruction.</p>
  <p>b. Remove the square brackets <code>[]</code> from the delete line.
  Try running it again. Why do we need them?</p>
  <p>c. Replace <code>X</code> with double and try the same thing. Does it
  behave the same way? Should it? Why? Can we trust it?</p>
  <p>d. What type of <code>new</code> and <code>delete</code> (with and
  without brackets) could we manage without? Why do we have both?</p>
  <p>e. What constructor type does <code>X</code> have to have to use
  <code>new[]</code>?</p></li>
  <li><p>​Add the following struct definition after the definition of
  struct X:</p>
  <div class="sourceCode" id="cb19"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb19-1" class="link-block"><a href="#cb19-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">struct</span> Y</span>
  <span id="cb19-2" class="link-block"><a href="#cb19-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb19-3" class="link-block"><a href="#cb19-3" aria-hidden="true" tabindex="-1" target="_blank"></a>    X <span class="va">m_x</span><span class="op">;</span> </span>
  <span id="cb19-4" class="link-block"><a href="#cb19-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_i</span><span class="op">;</span></span>
  <span id="cb19-5" class="link-block"><a href="#cb19-5" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span></code></pre></div>
  <p>a. Add the following lines to main (before the return).</p>
  <div class="sourceCode" id="cb20"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb20-1" class="link-block"><a href="#cb20-1" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y y1<span class="op">;</span></span>
  <span id="cb20-2" class="link-block"><a href="#cb20-2" aria-hidden="true" tabindex="-1" target="_blank"></a>    y1<span class="op">.</span><span class="va">m_x</span><span class="op">.</span><span class="va">m_a</span><span class="op">=</span><span class="dv">250</span><span class="op">;</span></span>
  <span id="cb20-3" class="link-block"><a href="#cb20-3" aria-hidden="true" tabindex="-1" target="_blank"></a>    y1<span class="op">.</span><span class="va">m_x</span><span class="op">.</span><span class="va">m_b</span><span class="op">=</span><span class="dv">750</span><span class="op">;</span></span>
  <span id="cb20-4" class="link-block"><a href="#cb20-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y y2<span class="op">(</span>y1<span class="op">);</span></span>
  <span id="cb20-5" class="link-block"><a href="#cb20-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y y3<span class="op">;</span></span>
  <span id="cb20-6" class="link-block"><a href="#cb20-6" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb20-7" class="link-block"><a href="#cb20-7" aria-hidden="true" tabindex="-1" target="_blank"></a>    y3<span class="op">=</span>y1<span class="op">;</span></span></code></pre></div>
  <p>b. Look at the output and use the debugger to investigate. Look at nm
  output – what got added?</p>
  <p>c. Investigating the object file with nm, change main to use / not
  use the Cctor, Ctor, assignment operator and Dtor. What happens?</p>
  <p>d. Does Y have constructors?</p>
  <p>e. Remove X's default Ctor and try to compile. What is the problem?
  Be able to explain every word in the error message.</p>
  <p>f. Make the definition of <code>y1</code> compile and work without
  reinserting X's default Ctor, and without removing the non-default
  Ctor.</p>
  <p>g. Remove the line <code>x1 = x3;</code> and remove X's assignment
  operator. Be able to explain every word in the error message.</p>
  <p>h. Can this problem be solved in a similar way to the previous one?
  Should it?</p></li>
  <li><p>​Use nm, the previous examples and some of your own to thoroughly
  investigate the <strong>generated functions.</strong></p>
  <p>a. Which <strong>4</strong> functions can the compiler generate
  automatically?</p>
  <p>b. Find <strong>two more</strong> operations which exist
  automatically and may be overloaded by the programmer.</p>
  <p>c. Are there situations in which the generated functions will not be
  generated? Which? In which situations?</p>
  <p>d. In what compilation unit are the functions generated?</p>
  <p>e. What potential problems does it create? How are they
  solved?</p></li>
  <li><p>​In C we apply functions on structs in order to manipulate them
  (by implementing functions that receive a pointer to the struct). In C++
  we send messages to objects by calling <strong>member
  functions.</strong></p>
  <p>a. Investigate (nm, debugger, play).</p>
  <div class="sourceCode" id="cb21"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb21-1" class="link-block"><a href="#cb21-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">struct</span> X</span>
  <span id="cb21-2" class="link-block"><a href="#cb21-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb21-3" class="link-block"><a href="#cb21-3" aria-hidden="true" tabindex="-1" target="_blank"></a>    X<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span><span class="op">,</span> <span class="dt">int</span> <span class="va">b_</span><span class="op">);</span></span>
  <span id="cb21-4" class="link-block"><a href="#cb21-4" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb21-5" class="link-block"><a href="#cb21-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">void</span> Inc<span class="op">();</span></span>
  <span id="cb21-6" class="link-block"><a href="#cb21-6" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">void</span> Dec<span class="op">();</span></span>
  <span id="cb21-7" class="link-block"><a href="#cb21-7" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb21-8" class="link-block"><a href="#cb21-8" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb21-9" class="link-block"><a href="#cb21-9" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_b</span><span class="op">;</span></span>
  <span id="cb21-10" class="link-block"><a href="#cb21-10" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb21-11" class="link-block"><a href="#cb21-11" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb21-12" class="link-block"><a href="#cb21-12" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::</span>X<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span><span class="op">,</span> <span class="dt">int</span> <span class="va">b_</span><span class="op">):</span> <span class="va">m_a</span><span class="op">(</span><span class="va">a_</span><span class="op">),</span> <span class="va">m_b</span><span class="op">(</span><span class="va">b_</span><span class="op">)</span></span>
  <span id="cb21-13" class="link-block"><a href="#cb21-13" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{}</span></span>
  <span id="cb21-14" class="link-block"><a href="#cb21-14" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb21-15" class="link-block"><a href="#cb21-15" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> X<span class="op">::</span>Inc<span class="op">()</span></span>
  <span id="cb21-16" class="link-block"><a href="#cb21-16" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb21-17" class="link-block"><a href="#cb21-17" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">++</span><span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb21-18" class="link-block"><a href="#cb21-18" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">++</span><span class="va">m_b</span><span class="op">;</span></span>
  <span id="cb21-19" class="link-block"><a href="#cb21-19" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb21-20" class="link-block"><a href="#cb21-20" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb21-21" class="link-block"><a href="#cb21-21" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> X<span class="op">::</span>Dec<span class="op">()</span></span>
  <span id="cb21-22" class="link-block"><a href="#cb21-22" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb21-23" class="link-block"><a href="#cb21-23" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">--</span><span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb21-24" class="link-block"><a href="#cb21-24" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">--</span><span class="va">m_b</span><span class="op">;</span></span>
  <span id="cb21-25" class="link-block"><a href="#cb21-25" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb21-26" class="link-block"><a href="#cb21-26" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb21-27" class="link-block"><a href="#cb21-27" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Inc<span class="op">()</span></span>
  <span id="cb21-28" class="link-block"><a href="#cb21-28" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{}</span></span>
  <span id="cb21-29" class="link-block"><a href="#cb21-29" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb21-30" class="link-block"><a href="#cb21-30" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb21-31" class="link-block"><a href="#cb21-31" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb21-32" class="link-block"><a href="#cb21-32" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x1<span class="op">(</span><span class="dv">7</span><span class="op">,-</span><span class="dv">55</span><span class="op">);</span></span>
  <span id="cb21-33" class="link-block"><a href="#cb21-33" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x2<span class="op">(</span>x1<span class="op">);</span></span>
  <span id="cb21-34" class="link-block"><a href="#cb21-34" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb21-35" class="link-block"><a href="#cb21-35" aria-hidden="true" tabindex="-1" target="_blank"></a>    Inc<span class="op">();</span></span>
  <span id="cb21-36" class="link-block"><a href="#cb21-36" aria-hidden="true" tabindex="-1" target="_blank"></a>    x1<span class="op">.</span>Inc<span class="op">();</span></span>
  <span id="cb21-37" class="link-block"><a href="#cb21-37" aria-hidden="true" tabindex="-1" target="_blank"></a>    x1<span class="op">.</span>Inc<span class="op">();</span></span>
  <span id="cb21-38" class="link-block"><a href="#cb21-38" aria-hidden="true" tabindex="-1" target="_blank"></a>    x2<span class="op">.</span>Dec<span class="op">();</span></span>
  <span id="cb21-39" class="link-block"><a href="#cb21-39" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb21-40" class="link-block"><a href="#cb21-40" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb21-41" class="link-block"><a href="#cb21-41" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>b. Explain all the ways in which the two versions of <code>Inc</code>
  are different (usage, nm, etc.). How do they coexist?</p>
  <p>c. Can the non-member <code>Inc()</code> change the values of
  <code>m_a</code> / <code>m_b</code>? Why?</p>
  <p>d. How is a member function different from having a data member that
  is a pointer to a function?</p>
  <p>e. How does adding multiple member functions influence the size of
  instances of the struct?</p>
  <p>f. In the method (also known as member function) <code>Dec()</code>,
  which <code>m_a</code> is decremented? How?</p>
  <p>g. In GDB perform the command <code>p X::Inc</code>. What parameters
  does it receive?</p>
  <p>h. Add the line
  <code>cout &lt;&lt; "this:" &lt;&lt; this &lt;&lt;endl;</code> to both
  methods and investigate.</p>
  <p>i. Where and how can we use <code>this</code>?</p>
  <p>j. What will you use <code>this</code> for?</p>
  <p>k. Where does <code>this</code> come from?</p>
  <p>l. Can you change <code>this</code>?</p>
  <p>m. What type of statement is <code>this</code>?</p></li>
  <li><p>​<code>const</code></p>
  <p>a. Investigate the C++ example:</p>
  <div class="sourceCode" id="cb22"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb22-1" class="link-block"><a href="#cb22-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">struct</span> X </span>
  <span id="cb22-2" class="link-block"><a href="#cb22-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb22-3" class="link-block"><a href="#cb22-3" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">explicit</span> X<span class="op">(</span><span class="dt">int</span><span class="op">);</span> </span>
  <span id="cb22-4" class="link-block"><a href="#cb22-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">~</span>X<span class="op">();</span> </span>
  <span id="cb22-5" class="link-block"><a href="#cb22-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">void</span> Foo<span class="op">();</span> </span>
  <span id="cb22-6" class="link-block"><a href="#cb22-6" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">void</span> Bar<span class="op">()</span> <span class="at">const</span><span class="op">;</span> </span>
  <span id="cb22-7" class="link-block"><a href="#cb22-7" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb22-8" class="link-block"><a href="#cb22-8" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_a</span><span class="op">;</span> </span>
  <span id="cb22-9" class="link-block"><a href="#cb22-9" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="op">*</span><span class="va">m_p</span><span class="op">;</span> </span>
  <span id="cb22-10" class="link-block"><a href="#cb22-10" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span> </span>
  <span id="cb22-11" class="link-block"><a href="#cb22-11" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb22-12" class="link-block"><a href="#cb22-12" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::</span>X<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span><span class="op">):</span> <span class="va">m_a</span><span class="op">(</span> <span class="va">a_</span> <span class="op">),</span> <span class="va">m_p</span><span class="op">(</span><span class="kw">new</span> <span class="dt">int</span><span class="op">(</span><span class="va">a_</span><span class="op">))</span> <span class="op">{}</span> </span>
  <span id="cb22-13" class="link-block"><a href="#cb22-13" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb22-14" class="link-block"><a href="#cb22-14" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::~</span>X<span class="op">()</span> <span class="op">{</span> <span class="kw">delete</span> <span class="va">m_p</span><span class="op">;</span> <span class="va">m_p</span><span class="op">=</span><span class="dv">0</span><span class="op">;</span> <span class="op">}</span> </span>
  <span id="cb22-15" class="link-block"><a href="#cb22-15" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb22-16" class="link-block"><a href="#cb22-16" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> X<span class="op">::</span>Foo<span class="op">()</span> <span class="op">{</span> <span class="op">++</span><span class="va">m_a</span><span class="op">;</span> <span class="op">--(*</span><span class="va">m_p</span><span class="op">);</span> <span class="op">}</span> </span>
  <span id="cb22-17" class="link-block"><a href="#cb22-17" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb22-18" class="link-block"><a href="#cb22-18" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> X<span class="op">::</span>Bar<span class="op">()</span> <span class="at">const</span> </span>
  <span id="cb22-19" class="link-block"><a href="#cb22-19" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb22-20" class="link-block"><a href="#cb22-20" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> <span class="va">m_a</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span> </span>
  <span id="cb22-21" class="link-block"><a href="#cb22-21" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> <span class="op">*</span><span class="va">m_p</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span> </span>
  <span id="cb22-22" class="link-block"><a href="#cb22-22" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> <span class="va">m_p</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span>    </span>
  <span id="cb22-23" class="link-block"><a href="#cb22-23" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//m_a = 0; //---1---</span></span>
  <span id="cb22-24" class="link-block"><a href="#cb22-24" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//m_p = 0; //---2---</span></span>
  <span id="cb22-25" class="link-block"><a href="#cb22-25" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//*m_p = 0; //---3---</span></span>
  <span id="cb22-26" class="link-block"><a href="#cb22-26" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//Foo(); //---5---</span></span>
  <span id="cb22-27" class="link-block"><a href="#cb22-27" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span> </span>
  <span id="cb22-28" class="link-block"><a href="#cb22-28" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb22-29" class="link-block"><a href="#cb22-29" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Fifi<span class="op">(</span><span class="at">const</span> X<span class="op">&amp;</span> <span class="va">x_</span><span class="op">)</span> </span>
  <span id="cb22-30" class="link-block"><a href="#cb22-30" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb22-31" class="link-block"><a href="#cb22-31" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//x_.Foo(); //---4---</span></span>
  <span id="cb22-32" class="link-block"><a href="#cb22-32" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="va">x_</span><span class="op">.</span>Bar<span class="op">();</span> </span>
  <span id="cb22-33" class="link-block"><a href="#cb22-33" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span> </span>
  <span id="cb22-34" class="link-block"><a href="#cb22-34" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb22-35" class="link-block"><a href="#cb22-35" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span> </span>
  <span id="cb22-36" class="link-block"><a href="#cb22-36" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb22-37" class="link-block"><a href="#cb22-37" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x1<span class="op">(</span><span class="dv">1</span><span class="op">);</span> </span>
  <span id="cb22-38" class="link-block"><a href="#cb22-38" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb22-39" class="link-block"><a href="#cb22-39" aria-hidden="true" tabindex="-1" target="_blank"></a>    x1<span class="op">.</span>Foo<span class="op">();</span> </span>
  <span id="cb22-40" class="link-block"><a href="#cb22-40" aria-hidden="true" tabindex="-1" target="_blank"></a>    Fifi<span class="op">(</span>x1<span class="op">);</span> </span>
  <span id="cb22-41" class="link-block"><a href="#cb22-41" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb22-42" class="link-block"><a href="#cb22-42" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> </span>
  <span id="cb22-43" class="link-block"><a href="#cb22-43" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>b. Explain the meaning of <code>const</code> on a struct in C</p>
  <p>c. Explain the different meanings of <code>const </code>on a pointer
  in C.</p>
  <p>d. Uncomment the commented lines (one-at-a-time) and investigate the
  compiler messages.</p>
  <p>e. How is commented line number 3 different from the previous ones?
  What is wrong with the compiler?</p>
  <p>f. What is the meaning of <code>const</code> in the declaration and
  definition of the method <code>Bar()</code>?</p>
  <p>g. What is the type of <code>this</code> within <code>Bar()</code>?
  (You can use GDB to find out!)</p>
  <p>h. Why is this feature important?<br>
  i. What is the new habit we need to have?</p>
  <p>j. What horrible mistakes exist in struct <code>X</code> (nothing to
  do with const)?</p></li>
  <li><p>​Access modifiers and <code>class</code></p>
  <div class="sourceCode" id="cb23"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb23-1" class="link-block"><a href="#cb23-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="pp">#include</span><span class="im">&lt;cstdio&gt;</span></span>
  <span id="cb23-2" class="link-block"><a href="#cb23-2" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb23-3" class="link-block"><a href="#cb23-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">struct</span> X</span>
  <span id="cb23-4" class="link-block"><a href="#cb23-4" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb23-5" class="link-block"><a href="#cb23-5" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb23-6" class="link-block"><a href="#cb23-6" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">explicit</span> X<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span><span class="op">);</span></span>
  <span id="cb23-7" class="link-block"><a href="#cb23-7" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">void</span> Foo<span class="op">();</span></span>
  <span id="cb23-8" class="link-block"><a href="#cb23-8" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb23-9" class="link-block"><a href="#cb23-9" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb23-10" class="link-block"><a href="#cb23-10" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb23-11" class="link-block"><a href="#cb23-11" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb23-12" class="link-block"><a href="#cb23-12" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb23-13" class="link-block"><a href="#cb23-13" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::</span>X<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span><span class="op">)</span></span>
  <span id="cb23-14" class="link-block"><a href="#cb23-14" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">:</span> <span class="va">m_a</span><span class="op">(</span><span class="va">a_</span><span class="op">)</span></span>
  <span id="cb23-15" class="link-block"><a href="#cb23-15" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb23-16" class="link-block"><a href="#cb23-16" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb23-17" class="link-block"><a href="#cb23-17" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb23-18" class="link-block"><a href="#cb23-18" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> X<span class="op">::</span>Foo<span class="op">()</span></span>
  <span id="cb23-19" class="link-block"><a href="#cb23-19" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb23-20" class="link-block"><a href="#cb23-20" aria-hidden="true" tabindex="-1" target="_blank"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> <span class="va">m_a</span><span class="op">);</span></span>
  <span id="cb23-21" class="link-block"><a href="#cb23-21" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb23-22" class="link-block"><a href="#cb23-22" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb23-23" class="link-block"><a href="#cb23-23" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">(</span><span class="at">const</span> X <span class="op">&amp;</span><span class="va">x_</span><span class="op">)</span></span>
  <span id="cb23-24" class="link-block"><a href="#cb23-24" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb23-25" class="link-block"><a href="#cb23-25" aria-hidden="true" tabindex="-1" target="_blank"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> <span class="va">x_</span><span class="op">.</span><span class="va">m_a</span><span class="op">);</span></span>
  <span id="cb23-26" class="link-block"><a href="#cb23-26" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb23-27" class="link-block"><a href="#cb23-27" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb23-28" class="link-block"><a href="#cb23-28" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb23-29" class="link-block"><a href="#cb23-29" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb23-30" class="link-block"><a href="#cb23-30" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x1<span class="op">;</span></span>
  <span id="cb23-31" class="link-block"><a href="#cb23-31" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb23-32" class="link-block"><a href="#cb23-32" aria-hidden="true" tabindex="-1" target="_blank"></a>    x1<span class="op">.</span>Foo<span class="op">();</span></span>
  <span id="cb23-33" class="link-block"><a href="#cb23-33" aria-hidden="true" tabindex="-1" target="_blank"></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x1<span class="op">.</span><span class="va">m_a</span><span class="op">);</span></span>
  <span id="cb23-34" class="link-block"><a href="#cb23-34" aria-hidden="true" tabindex="-1" target="_blank"></a>    Foo<span class="op">(</span>x1<span class="op">);</span></span>
  <span id="cb23-35" class="link-block"><a href="#cb23-35" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb23-36" class="link-block"><a href="#cb23-36" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb23-37" class="link-block"><a href="#cb23-37" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>a. What happens when you compile? Why?</p>
  <p>b. What happens if you remove the <code>private</code> keyword from
  the above code?</p>
  <p>c. Suggest method(s) to add to struct <code>X</code> that will allow
  us to fix the code above without removing <code>private</code>.</p>
  <p>d. Where in the code above can <code>m_a</code> be used?</p>
  <p>e. How can you find all the code that will be influenced by changing
  the type of <code>m_a</code> to <code>unsigned char</code>?</p>
  <p>f. How will this be different if we did not use
  <code>private</code>?</p>
  <p>g. What is the purpose the <code>private</code> keyword?</p>
  <p>h. How did we achieve this in C?</p>
  <p>i. Why isn't the C way of achieving this good enough?</p>
  <p>j. What happens if we don't write the <code>public</code> keyword
  above?</p>
  <p>k. How can this feature help us with the problem of unwanted
  generated functions?</p>
  <p>l. What must you decide about generated functions with every new
  struct you write?</p>
  <p><strong>NOTE:</strong> C++ adds a <code>class</code> keyword that can
  be used in most places a <code>struct</code> is used.</p>
  <p>m. Replace the <code>struct</code> above with <code>class</code>.
  What changed?</p>
  <p>n. What happens if we now remove the <code>public</code> keyword from
  the code above?</p>
  <p>o. What happens if we remove the <code>private</code> keyword?</p>
  <p>p. What are all the differences between <code>class</code> and
  <code>struct</code>?</p>
  <p>q. Why do we have both?</p>
  <p>r. Why is it our convention to put <code>public</code>
  first?</p></li>
  <li><p>​<strong>Time for the Simple String Exercise</strong></p></li>
  <li><p>​Syntactic sugar / operator overloading: C++ lets us define
  operators for user defined types.</p>
  <p>a. Investigate the following code:</p>
  <div class="sourceCode" id="cb24"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb24-1" class="link-block"><a href="#cb24-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
  <span id="cb24-2" class="link-block"><a href="#cb24-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">using</span> <span class="kw">namespace</span> std<span class="op">;</span></span>
  <span id="cb24-3" class="link-block"><a href="#cb24-3" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb24-4" class="link-block"><a href="#cb24-4" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> X<span class="op">;</span></span>
  <span id="cb24-5" class="link-block"><a href="#cb24-5" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb24-6" class="link-block"><a href="#cb24-6" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> <span class="kw">operator</span><span class="op">+(</span><span class="at">const</span> X<span class="op">&amp;</span> <span class="va">x1_</span><span class="op">,</span> <span class="at">const</span> X<span class="op">&amp;</span> <span class="va">x2_</span><span class="op">)</span></span>
  <span id="cb24-7" class="link-block"><a href="#cb24-7" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb24-8" class="link-block"><a href="#cb24-8" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">7</span><span class="op">;</span></span>
  <span id="cb24-9" class="link-block"><a href="#cb24-9" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb24-10" class="link-block"><a href="#cb24-10" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb24-11" class="link-block"><a href="#cb24-11" aria-hidden="true" tabindex="-1" target="_blank"></a>ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span>ostream<span class="op">&amp;</span> <span class="va">os_</span><span class="op">,</span> <span class="at">const</span> X<span class="op">&amp;</span> <span class="va">x_</span><span class="op">);</span></span>
  <span id="cb24-12" class="link-block"><a href="#cb24-12" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb24-13" class="link-block"><a href="#cb24-13" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> X</span>
  <span id="cb24-14" class="link-block"><a href="#cb24-14" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb24-15" class="link-block"><a href="#cb24-15" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb24-16" class="link-block"><a href="#cb24-16" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">bool</span> <span class="kw">operator</span><span class="op">==(</span><span class="at">const</span> X<span class="op">&amp;</span> <span class="va">o_</span><span class="op">)</span> <span class="at">const</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">m_a</span> <span class="op">==</span> <span class="va">o_</span><span class="op">.</span><span class="va">m_a</span><span class="op">;</span> <span class="op">}</span></span>
  <span id="cb24-17" class="link-block"><a href="#cb24-17" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//Java style inline – not allowed in our coding standard</span></span>
  <span id="cb24-18" class="link-block"><a href="#cb24-18" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb24-19" class="link-block"><a href="#cb24-19" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">friend</span> ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span>ostream<span class="op">&amp;</span> <span class="va">os_</span><span class="op">,</span> <span class="at">const</span> X<span class="op">&amp;</span> <span class="va">x_</span><span class="op">);</span></span>
  <span id="cb24-20" class="link-block"><a href="#cb24-20" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb24-21" class="link-block"><a href="#cb24-21" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb24-22" class="link-block"><a href="#cb24-22" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb24-23" class="link-block"><a href="#cb24-23" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb24-24" class="link-block"><a href="#cb24-24" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb24-25" class="link-block"><a href="#cb24-25" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x1<span class="op">;</span></span>
  <span id="cb24-26" class="link-block"><a href="#cb24-26" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x2<span class="op">;</span></span>
  <span id="cb24-27" class="link-block"><a href="#cb24-27" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb24-28" class="link-block"><a href="#cb24-28" aria-hidden="true" tabindex="-1" target="_blank"></a>    cout<span class="op">&lt;&lt;</span> <span class="st">" x1+x2:"</span> <span class="op">&lt;&lt;</span> x1 <span class="op">+</span> x2 <span class="op">&lt;&lt;</span></span>
  <span id="cb24-29" class="link-block"><a href="#cb24-29" aria-hidden="true" tabindex="-1" target="_blank"></a>           <span class="st">" x1==x2:"</span> <span class="op">&lt;&lt;</span> <span class="op">(</span>x1 <span class="op">==</span> x2<span class="op">)</span> <span class="op">&lt;&lt;</span></span>
  <span id="cb24-30" class="link-block"><a href="#cb24-30" aria-hidden="true" tabindex="-1" target="_blank"></a>           <span class="st">" x1:"</span> <span class="op">&lt;&lt;</span> x1 <span class="op">&lt;&lt;</span></span>
  <span id="cb24-31" class="link-block"><a href="#cb24-31" aria-hidden="true" tabindex="-1" target="_blank"></a>           <span class="st">" x2:"</span> <span class="op">&lt;&lt;</span> x2 <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
  <span id="cb24-32" class="link-block"><a href="#cb24-32" aria-hidden="true" tabindex="-1" target="_blank"></a>    </span>
  <span id="cb24-33" class="link-block"><a href="#cb24-33" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb24-34" class="link-block"><a href="#cb24-34" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb24-35" class="link-block"><a href="#cb24-35" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb24-36" class="link-block"><a href="#cb24-36" aria-hidden="true" tabindex="-1" target="_blank"></a>ostream<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span>ostream<span class="op">&amp;</span> <span class="va">os_</span><span class="op">,</span> <span class="at">const</span> X<span class="op">&amp;</span> <span class="va">x_</span><span class="op">)</span> </span>
  <span id="cb24-37" class="link-block"><a href="#cb24-37" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb24-38" class="link-block"><a href="#cb24-38" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="va">os_</span> <span class="op">&lt;&lt;</span> <span class="va">x_</span><span class="op">.</span><span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb24-39" class="link-block"><a href="#cb24-39" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>b. Notice the differences between member operators vs. global
  operators. When will we use each?</p>
  <p>c. Investigate all the syntax used in this example. Write the type /
  side-effect / value of every expression in <code>main()</code>.</p>
  <p>d. Why do we need the line <code>class X;</code>at the beginning?</p>
  <p>e. What is the purpose of the line starting with <code>friend</code>?
  Remove it to investigate.</p>
  <p>f. Will non-member operators always be <code>friend</code>s? Why?</p>
  <p>g. Find a way to implement <code>operator&lt;&lt;</code> without it
  being a friend.</p>
  <p>h. How does <code>friend</code> play with <code>public</code> and
  <code>private</code>? Does it break encapsulation?</p>
  <p>i. In order for the operator&lt;&lt;() function to be able to access
  m_a in this case, should we use a <code>friend</code> attribute, or
  supply a GetA() getter method? Why?</p>
  <p>j. Return the <code>friend</code> line and remove the forward
  declaration of <code>operator&lt;&lt;</code>. What happens? How
  come?</p>
  <p>k. Where in the class body should the <code>friend</code> declaration
  be? Depends on what?</p>
  <p>l. Implement some more operators. What did you learn?</p>
  <p>m. When should you use operators vs. regular functions?</p>
  <p>n. Why do we call this "syntactic sugar"?</p></li>
  <li><p>​Conversions</p>
  <p>a. Investigate the following code (use all your tools nm, debugger,
  brain, etc.).</p>
  <div class="sourceCode" id="cb25"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb25-1" class="link-block"><a href="#cb25-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
  <span id="cb25-2" class="link-block"><a href="#cb25-2" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb25-3" class="link-block"><a href="#cb25-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> X</span>
  <span id="cb25-4" class="link-block"><a href="#cb25-4" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb25-5" class="link-block"><a href="#cb25-5" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb25-6" class="link-block"><a href="#cb25-6" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">explicit</span> X<span class="op">();</span></span>
  <span id="cb25-7" class="link-block"><a href="#cb25-7" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">explicit</span> X<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span><span class="op">);</span></span>
  <span id="cb25-8" class="link-block"><a href="#cb25-8" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">explicit</span> X<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span><span class="op">,</span> <span class="dt">int</span> <span class="va">b_</span><span class="op">);</span></span>
  <span id="cb25-9" class="link-block"><a href="#cb25-9" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb25-10" class="link-block"><a href="#cb25-10" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">operator</span> <span class="dt">int</span><span class="op">()</span> <span class="at">const</span><span class="op">;</span></span>
  <span id="cb25-11" class="link-block"><a href="#cb25-11" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">void</span> Print<span class="op">()</span> <span class="at">const</span><span class="op">;</span></span>
  <span id="cb25-12" class="link-block"><a href="#cb25-12" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb25-13" class="link-block"><a href="#cb25-13" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb25-14" class="link-block"><a href="#cb25-14" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb25-15" class="link-block"><a href="#cb25-15" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span> </span>
  <span id="cb25-16" class="link-block"><a href="#cb25-16" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb25-17" class="link-block"><a href="#cb25-17" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::</span>X<span class="op">()</span> <span class="op">:</span> <span class="va">m_a</span><span class="op">(</span><span class="dv">0</span><span class="op">)</span> <span class="op">{</span> <span class="op">}</span></span>
  <span id="cb25-18" class="link-block"><a href="#cb25-18" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::</span>X<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span><span class="op">)</span> <span class="op">:</span> <span class="va">m_a</span><span class="op">(</span><span class="va">a_</span><span class="op">)</span> <span class="op">{</span> <span class="op">}</span></span>
  <span id="cb25-19" class="link-block"><a href="#cb25-19" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::</span>X<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span><span class="op">,</span> <span class="dt">int</span> <span class="va">b_</span><span class="op">)</span> <span class="op">:</span> <span class="va">m_a</span><span class="op">(</span><span class="va">a_</span> <span class="op">+</span> <span class="va">b_</span><span class="op">)</span> <span class="op">{</span> <span class="op">}</span></span>
  <span id="cb25-20" class="link-block"><a href="#cb25-20" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb25-21" class="link-block"><a href="#cb25-21" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::</span><span class="kw">operator</span> <span class="dt">int</span><span class="op">()</span><span class="at">const</span> </span>
  <span id="cb25-22" class="link-block"><a href="#cb25-22" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb25-23" class="link-block"><a href="#cb25-23" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="va">m_num</span><span class="op">;</span></span>
  <span id="cb25-24" class="link-block"><a href="#cb25-24" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb25-25" class="link-block"><a href="#cb25-25" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb25-26" class="link-block"><a href="#cb25-26" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> X<span class="op">::</span>Print<span class="op">()</span> </span>
  <span id="cb25-27" class="link-block"><a href="#cb25-27" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb25-28" class="link-block"><a href="#cb25-28" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> <span class="st">"X::Print() "</span> <span class="op">&lt;&lt;</span> <span class="va">m_a</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
  <span id="cb25-29" class="link-block"><a href="#cb25-29" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb25-30" class="link-block"><a href="#cb25-30" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb25-31" class="link-block"><a href="#cb25-31" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Fifi<span class="op">(</span>X <span class="va">x_</span><span class="op">)</span></span>
  <span id="cb25-32" class="link-block"><a href="#cb25-32" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb25-33" class="link-block"><a href="#cb25-33" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> <span class="st">"Fifi() "</span> <span class="op">&lt;&lt;</span> <span class="va">x_</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
  <span id="cb25-34" class="link-block"><a href="#cb25-34" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="va">x_</span><span class="op">.</span>Print<span class="op">();</span></span>
  <span id="cb25-35" class="link-block"><a href="#cb25-35" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb25-36" class="link-block"><a href="#cb25-36" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb25-37" class="link-block"><a href="#cb25-37" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb25-38" class="link-block"><a href="#cb25-38" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb25-39" class="link-block"><a href="#cb25-39" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb25-40" class="link-block"><a href="#cb25-40" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x1<span class="op">(</span><span class="dv">7</span><span class="op">);</span></span>
  <span id="cb25-41" class="link-block"><a href="#cb25-41" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb25-42" class="link-block"><a href="#cb25-42" aria-hidden="true" tabindex="-1" target="_blank"></a>    Fifi<span class="op">(</span>x1<span class="op">);</span>     <span class="co">// (1)</span></span>
  <span id="cb25-43" class="link-block"><a href="#cb25-43" aria-hidden="true" tabindex="-1" target="_blank"></a>    Fifi<span class="op">(</span>X<span class="op">(</span><span class="dv">7</span><span class="op">));</span>   <span class="co">// (2)</span></span>
  <span id="cb25-44" class="link-block"><a href="#cb25-44" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//Fifi(9);      // (3)</span></span>
  <span id="cb25-45" class="link-block"><a href="#cb25-45" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">// Fifi(3, 4); // (4)</span></span>
  <span id="cb25-46" class="link-block"><a href="#cb25-46" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb25-47" class="link-block"><a href="#cb25-47" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> x1 <span class="op">*</span> <span class="dv">3</span><span class="op">;</span> <span class="co">//(5)</span></span>
  <span id="cb25-48" class="link-block"><a href="#cb25-48" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>b. Explain the syntax of line (2) including type / value /
  side-effect.</p>
  <p>c. Uncomment line (3). What happens? What did the writer of line (3)
  expect would happen?</p>
  <ul>
  <li>Remove the <code>explicit</code> keyword from
  <code>explicit X(int a_);</code> and try again.</li>
  </ul>
  <p>d. What is different between calling <code>Fifi</code> in (1) (2) and
  (3)? Use the debugger.</p>
  <p>e. What happens if you uncomment (4)? Can you make it work?</p>
  <p>f. What does the <code>explicit</code> keyword mean on the default
  Ctor?</p>
  <p>g. What does the <code>explicit</code> keyword mean on a Ctor with
  one argument?</p>
  <p>h. What does the <code>explicit</code> keyword mean on a Ctor with
  two arguments or more?</p>
  <p>i. What Ctors do you need to prefix with <code>explicit</code>?
  Why?</p>
  <p>j. Find examples where you would want conversion Ctors.</p>
  <p>k. There are 3 different ways to write the explicit temporary
  creation in line (2). Find the other two.</p>
  <p>l. Why do we have 3 ways? Which one should we use? Why?</p>
  <p>m. Explain the syntax of line (5) including type / value /
  side-effect.</p>
  <p>n. Why doesn't the method <code>operator int()</code> have a return
  type?</p>
  <p>o. Find examples of where you would like conversion operators.</p>
  <p>p. Why is this syntactic sugar?</p>
  <p>q. Change <code>Fifi()</code> to accept a <code>const X&amp;</code>.
  Does the code still work? How? Why?</p>
  <p>r. Change <code>Fifi()</code> to accept a <code>X&amp;</code>. Does
  the code still work? How? Why?</p>
  <p><strong>NOTE:</strong> Many ways to except parameters:
  <code>(X x_)</code> <code>(X&amp; x_)</code>
  <code>(const X&amp; x_)</code> <code>(const X x_)</code>
  <code>(X* x_)</code> <code>(const X* x_)</code>
  <code>(X* const x_)</code>.</p>
  <p>s. Find all the diferences (in meaning, usage, misusage, readability,
  conversions, performance, etc.).</p>
  <p>t. When should you use each?</p></li>
  <li><p>​static members</p>
  <div class="sourceCode" id="cb26"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb26-1" class="link-block"><a href="#cb26-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> X</span>
  <span id="cb26-2" class="link-block"><a href="#cb26-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb26-3" class="link-block"><a href="#cb26-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb26-4" class="link-block"><a href="#cb26-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    X<span class="op">()</span> <span class="op">:</span> <span class="va">m_id</span><span class="op">(++</span><span class="va">s_cntr</span><span class="op">)</span> <span class="op">{}</span></span>
  <span id="cb26-5" class="link-block"><a href="#cb26-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> GetId<span class="op">()</span> <span class="op">{</span> <span class="bu">std::</span>cout<span class="op"> &lt;&lt;</span> <span class="va">m_id</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span> <span class="cf">return</span> <span class="va">m_id</span><span class="op">;}</span></span>
  <span id="cb26-6" class="link-block"><a href="#cb26-6" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb26-7" class="link-block"><a href="#cb26-7" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_id</span><span class="op">;</span></span>
  <span id="cb26-8" class="link-block"><a href="#cb26-8" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="at">static</span> <span class="dt">int</span> <span class="va">s_cntr</span><span class="op">;</span></span>
  <span id="cb26-9" class="link-block"><a href="#cb26-9" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb26-10" class="link-block"><a href="#cb26-10" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb26-11" class="link-block"><a href="#cb26-11" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> X<span class="op">::</span><span class="va">s_cntr</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb26-12" class="link-block"><a href="#cb26-12" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb26-13" class="link-block"><a href="#cb26-13" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb26-14" class="link-block"><a href="#cb26-14" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb26-15" class="link-block"><a href="#cb26-15" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x1<span class="op">;</span></span>
  <span id="cb26-16" class="link-block"><a href="#cb26-16" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x2<span class="op">;</span></span>
  <span id="cb26-17" class="link-block"><a href="#cb26-17" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb26-18" class="link-block"><a href="#cb26-18" aria-hidden="true" tabindex="-1" target="_blank"></a>    x1<span class="op">.</span>GetId<span class="op">();</span></span>
  <span id="cb26-19" class="link-block"><a href="#cb26-19" aria-hidden="true" tabindex="-1" target="_blank"></a>    x2<span class="op">.</span>GetId<span class="op">();</span></span>
  <span id="cb26-20" class="link-block"><a href="#cb26-20" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb26-21" class="link-block"><a href="#cb26-21" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>   </span>
  <span id="cb26-22" class="link-block"><a href="#cb26-22" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>a. What does static on a data member imply?</p>
  <p>b. What is the meaning of the line starting with
  <code>int X::</code>? Why do we need it?(Try removing.) Where should we
  put this line?</p>
  <p>c. Notice our coding convention for static data members.</p>
  <p>d. Why “static” again? What do global static variables, local static,
  and class static have in common?</p>
  <p>e. Investigate and research static member functions.</p>
  <p>f. What can you do with a static member function that is impossible
  with a regular method?</p>
  <p>g. What does a regular member function do that a static member
  function cannot?</p>
  <p>h. What are the two different syntaxes used to call static member
  functions?</p>
  <p>i. Can static member functions access private member variables /
  functions of an object?</p></li>
  <li><p>​<strong>Time for Complex Exercise</strong></p></li>
  <li><p>​Inheritance</p>
  <p>Compile-time polymorphism in C++ is implemented with templates, but
  we also have runtime polymorphism implemented via inheritance and
  virtual functions.</p>
  <p>a. Investigate the code, look at the output, investigate with the
  debugger, check the sizeof, concentrate on Ctors, Dtors and virtual
  functions.</p>
  <div class="sourceCode" id="cb27"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb27-1" class="link-block"><a href="#cb27-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> B</span>
  <span id="cb27-2" class="link-block"><a href="#cb27-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb27-3" class="link-block"><a href="#cb27-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb27-4" class="link-block"><a href="#cb27-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    B<span class="op">(</span><span class="dt">int</span> <span class="va">a_</span> <span class="op">=</span> <span class="dv">8</span><span class="op">):</span><span class="va">m_a</span><span class="op">(</span><span class="va">a_</span><span class="op">){</span> cout <span class="op">&lt;&lt;</span> <span class="st">"B::Ctor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span>    </span>
  <span id="cb27-5" class="link-block"><a href="#cb27-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">virtual</span> <span class="op">~</span>B<span class="op">(){</span> cout <span class="op">&lt;&lt;</span> <span class="st">"B::Dtor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb27-6" class="link-block"><a href="#cb27-6" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="co">//Java style is not allowed in our coding convention</span></span>
  <span id="cb27-7" class="link-block"><a href="#cb27-7" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">virtual</span> <span class="dt">void</span> Print1<span class="op">()</span> <span class="at">const</span><span class="op">;</span></span>
  <span id="cb27-8" class="link-block"><a href="#cb27-8" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">virtual</span> <span class="dt">void</span> Print2<span class="op">()</span> <span class="at">const</span><span class="op">;</span></span>
  <span id="cb27-9" class="link-block"><a href="#cb27-9" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">virtual</span> <span class="dt">void</span> Print3<span class="op">()</span> <span class="at">const</span><span class="op">;</span></span>
  <span id="cb27-10" class="link-block"><a href="#cb27-10" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb27-11" class="link-block"><a href="#cb27-11" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb27-12" class="link-block"><a href="#cb27-12" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb27-13" class="link-block"><a href="#cb27-13" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb27-14" class="link-block"><a href="#cb27-14" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> B<span class="op">::</span>Print1<span class="op">()</span> <span class="at">const</span></span>
  <span id="cb27-15" class="link-block"><a href="#cb27-15" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb27-16" class="link-block"><a href="#cb27-16" aria-hidden="true" tabindex="-1" target="_blank"></a>    cout <span class="op">&lt;&lt;</span> <span class="st">"B::Print1 B::m_a - "</span> <span class="op">&lt;&lt;</span> <span class="va">m_a</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
  <span id="cb27-17" class="link-block"><a href="#cb27-17" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb27-18" class="link-block"><a href="#cb27-18" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb27-19" class="link-block"><a href="#cb27-19" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> B<span class="op">::</span>Print2<span class="op">()</span> <span class="at">const</span></span>
  <span id="cb27-20" class="link-block"><a href="#cb27-20" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb27-21" class="link-block"><a href="#cb27-21" aria-hidden="true" tabindex="-1" target="_blank"></a>    cout <span class="op">&lt;&lt;</span> <span class="st">"B::Print2"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
  <span id="cb27-22" class="link-block"><a href="#cb27-22" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb27-23" class="link-block"><a href="#cb27-23" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb27-24" class="link-block"><a href="#cb27-24" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> B<span class="op">::</span>Print3<span class="op">()</span> <span class="at">const</span></span>
  <span id="cb27-25" class="link-block"><a href="#cb27-25" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb27-26" class="link-block"><a href="#cb27-26" aria-hidden="true" tabindex="-1" target="_blank"></a>    cout <span class="op">&lt;&lt;</span> <span class="st">"B::Print3"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> </span>
  <span id="cb27-27" class="link-block"><a href="#cb27-27" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span>    </span>
  <span id="cb27-28" class="link-block"><a href="#cb27-28" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb27-29" class="link-block"><a href="#cb27-29" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> X<span class="op">:</span> <span class="kw">public</span> B</span>
  <span id="cb27-30" class="link-block"><a href="#cb27-30" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb27-31" class="link-block"><a href="#cb27-31" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb27-32" class="link-block"><a href="#cb27-32" aria-hidden="true" tabindex="-1" target="_blank"></a>    X<span class="op">():</span><span class="va">m_b</span><span class="op">(</span><span class="dv">0</span><span class="op">)</span> <span class="op">{</span> cout<span class="op">&lt;&lt;</span> <span class="st">"X::Ctor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb27-33" class="link-block"><a href="#cb27-33" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb27-34" class="link-block"><a href="#cb27-34" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">~</span>X<span class="op">(){</span> cout <span class="op">&lt;&lt;</span> <span class="st">"X::Dtor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;}</span></span>
  <span id="cb27-35" class="link-block"><a href="#cb27-35" aria-hidden="true" tabindex="-1" target="_blank"></a>    </span>
  <span id="cb27-36" class="link-block"><a href="#cb27-36" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">virtual</span> <span class="dt">void</span> Print1<span class="op">()</span><span class="at">const</span></span>
  <span id="cb27-37" class="link-block"><a href="#cb27-37" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">{</span> </span>
  <span id="cb27-38" class="link-block"><a href="#cb27-38" aria-hidden="true" tabindex="-1" target="_blank"></a>        cout <span class="op">&lt;&lt;</span> <span class="st">"X::Print1 X::m_b - "</span> <span class="op">&lt;&lt;</span> <span class="va">m_b</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
  <span id="cb27-39" class="link-block"><a href="#cb27-39" aria-hidden="true" tabindex="-1" target="_blank"></a>        B<span class="op">::</span>Print1<span class="op">();</span></span>
  <span id="cb27-40" class="link-block"><a href="#cb27-40" aria-hidden="true" tabindex="-1" target="_blank"></a>        cout <span class="op">&lt;&lt;</span> <span class="st">"X::Print1 end"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> </span>
  <span id="cb27-41" class="link-block"><a href="#cb27-41" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">}</span></span>
  <span id="cb27-42" class="link-block"><a href="#cb27-42" aria-hidden="true" tabindex="-1" target="_blank"></a>    </span>
  <span id="cb27-43" class="link-block"><a href="#cb27-43" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">void</span> Print2<span class="op">()</span> <span class="at">const</span> <span class="op">{</span> cout <span class="op">&lt;&lt;</span> <span class="st">"X::Print2"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb27-44" class="link-block"><a href="#cb27-44" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb27-45" class="link-block"><a href="#cb27-45" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_b</span><span class="op">;</span></span>
  <span id="cb27-46" class="link-block"><a href="#cb27-46" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb27-47" class="link-block"><a href="#cb27-47" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb27-48" class="link-block"><a href="#cb27-48" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb27-49" class="link-block"><a href="#cb27-49" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb27-50" class="link-block"><a href="#cb27-50" aria-hidden="true" tabindex="-1" target="_blank"></a>    B <span class="op">*</span>b1<span class="op">=</span> <span class="kw">new</span> B<span class="op">;</span></span>
  <span id="cb27-51" class="link-block"><a href="#cb27-51" aria-hidden="true" tabindex="-1" target="_blank"></a>    B <span class="op">*</span>b2<span class="op">=</span> <span class="kw">new</span> X<span class="op">;</span></span>
  <span id="cb27-52" class="link-block"><a href="#cb27-52" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb27-53" class="link-block"><a href="#cb27-53" aria-hidden="true" tabindex="-1" target="_blank"></a>    cout<span class="op">&lt;&lt;</span> endl <span class="op">&lt;&lt;</span> <span class="st">"main b1:"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
  <span id="cb27-54" class="link-block"><a href="#cb27-54" aria-hidden="true" tabindex="-1" target="_blank"></a>    b1<span class="op">-&gt;</span>Print1<span class="op">();</span></span>
  <span id="cb27-55" class="link-block"><a href="#cb27-55" aria-hidden="true" tabindex="-1" target="_blank"></a>    b1<span class="op">-&gt;</span>Print2<span class="op">();</span></span>
  <span id="cb27-56" class="link-block"><a href="#cb27-56" aria-hidden="true" tabindex="-1" target="_blank"></a>    b1<span class="op">-&gt;</span>Print3<span class="op">();</span></span>
  <span id="cb27-57" class="link-block"><a href="#cb27-57" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb27-58" class="link-block"><a href="#cb27-58" aria-hidden="true" tabindex="-1" target="_blank"></a>    cout <span class="op">&lt;&lt;</span> endl <span class="op">&lt;&lt;</span> <span class="st">"main b2:"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
  <span id="cb27-59" class="link-block"><a href="#cb27-59" aria-hidden="true" tabindex="-1" target="_blank"></a>    b2<span class="op">-&gt;</span>Print1<span class="op">();</span></span>
  <span id="cb27-60" class="link-block"><a href="#cb27-60" aria-hidden="true" tabindex="-1" target="_blank"></a>    b2<span class="op">-&gt;</span>Print2<span class="op">();</span></span>
  <span id="cb27-61" class="link-block"><a href="#cb27-61" aria-hidden="true" tabindex="-1" target="_blank"></a>    b2<span class="op">-&gt;</span>Print3<span class="op">();</span></span>
  <span id="cb27-62" class="link-block"><a href="#cb27-62" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb27-63" class="link-block"><a href="#cb27-63" aria-hidden="true" tabindex="-1" target="_blank"></a>    X <span class="op">*</span>xx<span class="op">=</span> <span class="kw">static_cast</span><span class="op">&lt;</span>X<span class="op">*&gt;(</span>b2<span class="op">);</span></span>
  <span id="cb27-64" class="link-block"><a href="#cb27-64" aria-hidden="true" tabindex="-1" target="_blank"></a>    cout <span class="op">&lt;&lt;</span> endl <span class="op">&lt;&lt;</span> <span class="st">"main xx:"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
  <span id="cb27-65" class="link-block"><a href="#cb27-65" aria-hidden="true" tabindex="-1" target="_blank"></a>    xx<span class="op">-&gt;</span>Print2<span class="op">();</span></span>
  <span id="cb27-66" class="link-block"><a href="#cb27-66" aria-hidden="true" tabindex="-1" target="_blank"></a>    b2<span class="op">-&gt;</span>Print2<span class="op">();</span></span>
  <span id="cb27-67" class="link-block"><a href="#cb27-67" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb27-68" class="link-block"><a href="#cb27-68" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">delete</span> b1<span class="op">;</span></span>
  <span id="cb27-69" class="link-block"><a href="#cb27-69" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">delete</span> b2<span class="op">;</span></span>
  <span id="cb27-70" class="link-block"><a href="#cb27-70" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb27-71" class="link-block"><a href="#cb27-71" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb27-72" class="link-block"><a href="#cb27-72" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>b. Look at main. How come we can initialize a <code>B*</code> with an
  address of <code>X</code>? What is it good for?</p>
  <p>c. What is called when the line <code>b2-&gt;Print3()</code> is
  executed?</p>
  <p>d. What new implicit conversion<strong>s</strong> does public
  inheritance add?</p>
  <p>e. What can <code>static_cast</code> do?</p>
  <p>f. Investigate the implementation of <code>X::Print1()</code>. What
  is interesting?</p>
  <p>g. Remove the default parameter value from the <code>B</code> class
  Ctor. What happens? Solve the problem.</p>
  <p>h. Remove the word <code>virtual</code> from the declaration of
  <code>Print2()</code> in class <code>B</code>. What happens?</p>
  <p>i. Look at the output of the lines <code>xx-&gt;Print2();</code> and
  <code>b2-&gt;Print2();</code>. What is wrong with this behavior?</p>
  <p>j. Would we ever want this behavior?</p>
  <p>k. Remove the word <code>virtual</code> from the declaration of
  <code>B</code>’s Dtor. What happens? What is wrong with this
  behavior?</p>
  <p>l. What does the difference in the declarations of
  <code>X::Print1()</code> and <code>X::Print2()</code> change?</p>
  <p>m. How is the virtual mechanism implemented in C++?</p></li>
  <li><p>​Exceptions</p>
  <p>In C, every function that might fail returns a status or sets errno
  (or a similar global flag). The caller of such a function has to check
  the status / flag to know if it failed. When it fails, the calling
  function does not really handle the error, it just returns the error
  status to its caller.</p>
  <p><strong>Example:</strong> If function <code>A</code> (that can handle
  a failure) calls function <code>B</code> that calls <code>C</code>, and
  so on – until function <code>Z</code> that returns an error status, all
  the functions <code>B</code>–<code>Y</code> contain similar lines of
  code that check status and pass it on. If even one function fails to
  pass the error status, <code>A</code> will not know an error
  occurred.</p>
  <p><strong>The solution:</strong> Exception handling. There are only a
  few functions where a decision can be made about what to do for
  rarely-expected failures ('exceptions'). Only in those functions (e.g.
  function <code>A</code>) is a new syntax used to notify the compiler
  that exceptions are handled, and how to handle them. In the function
  that used to return a status (function <code>Z</code>), we use a new
  syntax to throw an exception instead of return a value. All the
  functions along the way (e.g. functions <code>B</code>–<code>Y</code>)
  are clear of cumbersome error-handling code.</p>
  <p>a. Investigate the following code, and notice the new reserved words:
  <code>try</code> <code>throw</code> <code>catch</code>:</p>
  <div class="sourceCode" id="cb28"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb28-1" class="link-block"><a href="#cb28-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
  <span id="cb28-2" class="link-block"><a href="#cb28-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="pp">#include </span><span class="im">&lt;exception&gt;</span></span>
  <span id="cb28-3" class="link-block"><a href="#cb28-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="pp">#include </span><span class="im">&lt;string&gt;</span></span>
  <span id="cb28-4" class="link-block"><a href="#cb28-4" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="pp">#include </span><span class="im">&lt;cstdlib&gt;</span></span>
  <span id="cb28-5" class="link-block"><a href="#cb28-5" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb28-6" class="link-block"><a href="#cb28-6" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">using</span> <span class="kw">namespace</span> std<span class="op">;</span> </span>
  <span id="cb28-7" class="link-block"><a href="#cb28-7" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb28-8" class="link-block"><a href="#cb28-8" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">struct</span> BadDog<span class="op">:</span> <span class="kw">public</span> runtime_error </span>
  <span id="cb28-9" class="link-block"><a href="#cb28-9" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span>   </span>
  <span id="cb28-10" class="link-block"><a href="#cb28-10" aria-hidden="true" tabindex="-1" target="_blank"></a>    BadDog<span class="op">(</span><span class="at">const</span> string<span class="op">&amp;</span> <span class="va">s_</span> <span class="op">=</span> <span class="st">"This is a bad dog"</span><span class="op">):</span> runtime_error<span class="op">(</span><span class="va">s_</span><span class="op">)</span> <span class="op">{}</span> </span>
  <span id="cb28-11" class="link-block"><a href="#cb28-11" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span> </span>
  <span id="cb28-12" class="link-block"><a href="#cb28-12" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb28-13" class="link-block"><a href="#cb28-13" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Fifi<span class="op">()</span> </span>
  <span id="cb28-14" class="link-block"><a href="#cb28-14" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb28-15" class="link-block"><a href="#cb28-15" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">throw</span> BadDog<span class="op">(</span><span class="st">"bad pup"</span><span class="op">);</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"Fifi() after throw"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> </span>
  <span id="cb28-16" class="link-block"><a href="#cb28-16" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span> </span>
  <span id="cb28-17" class="link-block"><a href="#cb28-17" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">()</span> </span>
  <span id="cb28-18" class="link-block"><a href="#cb28-18" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb28-19" class="link-block"><a href="#cb28-19" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb28-20" class="link-block"><a href="#cb28-20" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="co">//  X x1;     </span></span>
  <span id="cb28-21" class="link-block"><a href="#cb28-21" aria-hidden="true" tabindex="-1" target="_blank"></a>    Fifi<span class="op">();</span>     </span>
  <span id="cb28-22" class="link-block"><a href="#cb28-22" aria-hidden="true" tabindex="-1" target="_blank"></a>    cerr <span class="op">&lt;&lt;</span> <span class="st">"Foo() after Fifi()"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> </span>
  <span id="cb28-23" class="link-block"><a href="#cb28-23" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span> </span>
  <span id="cb28-24" class="link-block"><a href="#cb28-24" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb28-25" class="link-block"><a href="#cb28-25" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Bar<span class="op">()</span> </span>
  <span id="cb28-26" class="link-block"><a href="#cb28-26" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span> </span>
  <span id="cb28-27" class="link-block"><a href="#cb28-27" aria-hidden="true" tabindex="-1" target="_blank"></a>    Foo<span class="op">();</span> </span>
  <span id="cb28-28" class="link-block"><a href="#cb28-28" aria-hidden="true" tabindex="-1" target="_blank"></a>    cerr <span class="op">&lt;&lt;</span> <span class="st">"Bar() after Foo()"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> </span>
  <span id="cb28-29" class="link-block"><a href="#cb28-29" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span> </span>
  <span id="cb28-30" class="link-block"><a href="#cb28-30" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span>     </span>
  <span id="cb28-31" class="link-block"><a href="#cb28-31" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">try</span>     </span>
  <span id="cb28-32" class="link-block"><a href="#cb28-32" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">{</span>         </span>
  <span id="cb28-33" class="link-block"><a href="#cb28-33" aria-hidden="true" tabindex="-1" target="_blank"></a>        Bar<span class="op">();</span>     </span>
  <span id="cb28-34" class="link-block"><a href="#cb28-34" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">}</span>     </span>
  <span id="cb28-35" class="link-block"><a href="#cb28-35" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">catch</span><span class="op">(</span>bad_alloc<span class="op">&amp;)</span>     </span>
  <span id="cb28-36" class="link-block"><a href="#cb28-36" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">{</span>         </span>
  <span id="cb28-37" class="link-block"><a href="#cb28-37" aria-hidden="true" tabindex="-1" target="_blank"></a>        cerr <span class="op">&lt;&lt;</span> <span class="st">"Out of memory! exiting."</span><span class="op">;</span> exit<span class="op">(</span><span class="dv">2</span><span class="op">);</span>     </span>
  <span id="cb28-38" class="link-block"><a href="#cb28-38" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">}</span>     </span>
  <span id="cb28-39" class="link-block"><a href="#cb28-39" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">catch</span><span class="op">(</span>BadDog<span class="op">&amp;</span> b<span class="op">)</span>     </span>
  <span id="cb28-40" class="link-block"><a href="#cb28-40" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">{</span>         </span>
  <span id="cb28-41" class="link-block"><a href="#cb28-41" aria-hidden="true" tabindex="-1" target="_blank"></a>        cerr <span class="op">&lt;&lt;</span> <span class="st">"Bad dog exception: "</span> <span class="op">&lt;&lt;</span> b<span class="op">.</span>what<span class="op">();</span> exit<span class="op">(</span><span class="dv">3</span><span class="op">);</span>     </span>
  <span id="cb28-42" class="link-block"><a href="#cb28-42" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">}</span>     </span>
  <span id="cb28-43" class="link-block"><a href="#cb28-43" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">catch</span><span class="op">(</span> exception<span class="op">&amp;</span> r <span class="op">)</span></span>
  <span id="cb28-44" class="link-block"><a href="#cb28-44" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">{</span></span>
  <span id="cb28-45" class="link-block"><a href="#cb28-45" aria-hidden="true" tabindex="-1" target="_blank"></a>        cerr <span class="op">&lt;&lt;</span> <span class="st">"unknown exception: "</span> <span class="op">&lt;&lt;</span> r<span class="op">.</span>what<span class="op">();</span></span>
  <span id="cb28-46" class="link-block"><a href="#cb28-46" aria-hidden="true" tabindex="-1" target="_blank"></a>        exit<span class="op">(</span><span class="dv">4</span><span class="op">);</span>     </span>
  <span id="cb28-47" class="link-block"><a href="#cb28-47" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">}</span></span>
  <span id="cb28-48" class="link-block"><a href="#cb28-48" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> </span>
  <span id="cb28-49" class="link-block"><a href="#cb28-49" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>b. Use the debugger to investigate Ctors and Dtors.</p>
  <p>c. Notice what gets printed out, and what does not. Why?</p>
  <p>d. What is <code>exception</code>?</p>
  <p>e. What is <code>logical_error</code>?</p>
  <p>f. What is <code>bad_alloc</code>?</p>
  <p>g. Remove the <code>catch(BadDog&amp;)</code> and its block. Run it
  this way, explain the output.</p>
  <p>h. Change the order of the catch blocks. Does the order have any
  significance?</p>
  <p>i. Add a class that prints in its Ctor and Dtor, and add a local
  variable of that class to the function <code>Foo()</code> before the
  call to <code>Fifi()</code>. Use the debugger to investigate the
  results. What did you learn?</p>
  <p>j. Change the throw line to throw something else. Add a
  <code>catch(...)</code> block. Why do the catch blocks take the
  exception objects by reference? Experiment and research.</p></li>
  <li><p>​Research and experiment with the following:</p>
  <ul>
  <li><p>Dynamic exception specification (also known as 'throw
  list')</p></li>
  <li><p>set_terminate and terminate</p></li>
  <li><p>set_unexpected and unexpected</p></li>
  </ul></li>
  <li><p>​Practice investigating a crashed program – create a program that
  throws an unhandled / unexpected exception. Open the core file with GDB
  and investigate.</p></li>
  <li><p>​Exception safety – resources</p>
  <div class="sourceCode" id="cb29"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb29-1" class="link-block"><a href="#cb29-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">()</span></span>
  <span id="cb29-2" class="link-block"><a href="#cb29-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb29-3" class="link-block"><a href="#cb29-3" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="op">*</span>ip <span class="op">=</span> <span class="kw">new</span> <span class="dt">int</span><span class="op">;</span></span>
  <span id="cb29-4" class="link-block"><a href="#cb29-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    Bar<span class="op">(</span>ip<span class="op">);</span></span>
  <span id="cb29-5" class="link-block"><a href="#cb29-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    Fishi<span class="op">();</span></span>
  <span id="cb29-6" class="link-block"><a href="#cb29-6" aria-hidden="true" tabindex="-1" target="_blank"></a>    Fifi<span class="op">(</span>ip<span class="op">);</span></span>
  <span id="cb29-7" class="link-block"><a href="#cb29-7" aria-hidden="true" tabindex="-1" target="_blank"></a>    Dodo<span class="op">();</span></span>
  <span id="cb29-8" class="link-block"><a href="#cb29-8" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">delete</span> ip<span class="op">;</span></span>
  <span id="cb29-9" class="link-block"><a href="#cb29-9" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>a. What is the problem?</p>
  <p>b. How can you solve the problem? Find two solutions.</p>
  <p>c. Which one is better?</p>
  <p>d. How do we avoid having this problem ever again? What is the new
  habit?</p></li>
  <li><p>​Exception safety – Dtors</p>
  <div class="sourceCode" id="cb30"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb30-1" class="link-block"><a href="#cb30-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> Foo<span class="op">(</span><span class="dt">int</span><span class="op">)</span> <span class="cf">throw</span><span class="op">(</span>bad_alloc<span class="op">);</span></span>
  <span id="cb30-2" class="link-block"><a href="#cb30-2" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb30-3" class="link-block"><a href="#cb30-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Bar<span class="op">()</span> <span class="cf">throw</span><span class="op">(</span>bad_cast<span class="op">);</span></span>
  <span id="cb30-4" class="link-block"><a href="#cb30-4" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb30-5" class="link-block"><a href="#cb30-5" aria-hidden="true" tabindex="-1" target="_blank"></a>X<span class="op">::~</span>X<span class="op">()</span></span>
  <span id="cb30-6" class="link-block"><a href="#cb30-6" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span>     </span>
  <span id="cb30-7" class="link-block"><a href="#cb30-7" aria-hidden="true" tabindex="-1" target="_blank"></a>    cerr <span class="op">&lt;&lt;</span> Foo<span class="op">(</span><span class="va">m_a</span><span class="op">)</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
  <span id="cb30-8" class="link-block"><a href="#cb30-8" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span>
  <span id="cb30-9" class="link-block"><a href="#cb30-9" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb30-10" class="link-block"><a href="#cb30-10" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Fishi<span class="op">()</span></span>
  <span id="cb30-11" class="link-block"><a href="#cb30-11" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb30-12" class="link-block"><a href="#cb30-12" aria-hidden="true" tabindex="-1" target="_blank"></a>    X x1<span class="op">;</span></span>
  <span id="cb30-13" class="link-block"><a href="#cb30-13" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">...</span></span>
  <span id="cb30-14" class="link-block"><a href="#cb30-14" aria-hidden="true" tabindex="-1" target="_blank"></a>    Bar<span class="op">();</span></span>
  <span id="cb30-15" class="link-block"><a href="#cb30-15" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">...</span></span>
  <span id="cb30-16" class="link-block"><a href="#cb30-16" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>a. What might happen if <code>Bar()</code> throws an exception when
  called by <code>Fishi()</code>?</p>
  <p>b. Create similar functioning code that actually throws from
  <code>Foo()</code>. What happens? Use the debugger to open the core
  file.</p>
  <p>c. What exactly happens?</p>
  <p>d. How can it be avoided? What is the new habit?</p>
  <p>e. What should the Dtor do?</p></li>
  <li><p>​Exception safety – Ctors</p>
  <div class="sourceCode" id="cb31"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb31-1" class="link-block"><a href="#cb31-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">struct</span> X</span>
  <span id="cb31-2" class="link-block"><a href="#cb31-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb31-3" class="link-block"><a href="#cb31-3" aria-hidden="true" tabindex="-1" target="_blank"></a>    X<span class="op">()</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"X Ctor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="cf">throw</span> bad_cast<span class="op">();</span> <span class="op">}</span></span>
  <span id="cb31-4" class="link-block"><a href="#cb31-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    X<span class="op">(</span><span class="dt">int</span><span class="op">)</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"X Ctor (int)"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-5" class="link-block"><a href="#cb31-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">~</span>X<span class="op">()</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"X Dtor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-6" class="link-block"><a href="#cb31-6" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb31-7" class="link-block"><a href="#cb31-7" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb31-8" class="link-block"><a href="#cb31-8" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">struct</span> Y</span>
  <span id="cb31-9" class="link-block"><a href="#cb31-9" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb31-10" class="link-block"><a href="#cb31-10" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y<span class="op">()</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"Y Ctor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-11" class="link-block"><a href="#cb31-11" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">~</span>Y<span class="op">(){</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"Y Dtor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-12" class="link-block"><a href="#cb31-12" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb31-13" class="link-block"><a href="#cb31-13" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb31-14" class="link-block"><a href="#cb31-14" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> L</span>
  <span id="cb31-15" class="link-block"><a href="#cb31-15" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb31-16" class="link-block"><a href="#cb31-16" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb31-17" class="link-block"><a href="#cb31-17" aria-hidden="true" tabindex="-1" target="_blank"></a>    L<span class="op">()</span> <span class="op">:</span><span class="va">m_x</span><span class="op">(</span><span class="dv">2</span><span class="op">)</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"L Ctor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-18" class="link-block"><a href="#cb31-18" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">~</span>L<span class="op">()</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"L Dtor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-19" class="link-block"><a href="#cb31-19" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb31-20" class="link-block"><a href="#cb31-20" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y <span class="va">m_y</span><span class="op">;</span></span>
  <span id="cb31-21" class="link-block"><a href="#cb31-21" aria-hidden="true" tabindex="-1" target="_blank"></a>    X <span class="va">m_x</span><span class="op">;</span></span>
  <span id="cb31-22" class="link-block"><a href="#cb31-22" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb31-23" class="link-block"><a href="#cb31-23" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb31-24" class="link-block"><a href="#cb31-24" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> M</span>
  <span id="cb31-25" class="link-block"><a href="#cb31-25" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb31-26" class="link-block"><a href="#cb31-26" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb31-27" class="link-block"><a href="#cb31-27" aria-hidden="true" tabindex="-1" target="_blank"></a>    M<span class="op">()</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"M Ctor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-28" class="link-block"><a href="#cb31-28" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">~</span>M<span class="op">()</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"M Dtor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-29" class="link-block"><a href="#cb31-29" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb31-30" class="link-block"><a href="#cb31-30" aria-hidden="true" tabindex="-1" target="_blank"></a>    X <span class="va">m_x</span><span class="op">;</span></span>
  <span id="cb31-31" class="link-block"><a href="#cb31-31" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y <span class="va">m_y</span><span class="op">;</span></span>
  <span id="cb31-32" class="link-block"><a href="#cb31-32" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb31-33" class="link-block"><a href="#cb31-33" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb31-34" class="link-block"><a href="#cb31-34" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> N</span>
  <span id="cb31-35" class="link-block"><a href="#cb31-35" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb31-36" class="link-block"><a href="#cb31-36" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb31-37" class="link-block"><a href="#cb31-37" aria-hidden="true" tabindex="-1" target="_blank"></a>    N<span class="op">()</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"N Ctor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-38" class="link-block"><a href="#cb31-38" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">~</span>N<span class="op">()</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"N Dtor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-39" class="link-block"><a href="#cb31-39" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb31-40" class="link-block"><a href="#cb31-40" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y <span class="va">m_y</span><span class="op">;</span></span>
  <span id="cb31-41" class="link-block"><a href="#cb31-41" aria-hidden="true" tabindex="-1" target="_blank"></a>    X <span class="va">m_x</span><span class="op">;</span></span>
  <span id="cb31-42" class="link-block"><a href="#cb31-42" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb31-43" class="link-block"><a href="#cb31-43" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb31-44" class="link-block"><a href="#cb31-44" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> J</span>
  <span id="cb31-45" class="link-block"><a href="#cb31-45" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb31-46" class="link-block"><a href="#cb31-46" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb31-47" class="link-block"><a href="#cb31-47" aria-hidden="true" tabindex="-1" target="_blank"></a>    J<span class="op">():</span> <span class="va">m_y</span><span class="op">(</span><span class="kw">new</span> Y<span class="op">),</span> <span class="va">m_x</span><span class="op">(</span><span class="kw">new</span> X<span class="op">)</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"J Ctor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;}</span></span>
  <span id="cb31-48" class="link-block"><a href="#cb31-48" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">~</span>J<span class="op">()</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"J Dtor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="kw">delete</span> <span class="va">m_x</span><span class="op">;</span> <span class="kw">delete</span> <span class="va">m_y</span><span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-49" class="link-block"><a href="#cb31-49" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb31-50" class="link-block"><a href="#cb31-50" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y <span class="op">*</span><span class="va">m_y</span><span class="op">;</span></span>
  <span id="cb31-51" class="link-block"><a href="#cb31-51" aria-hidden="true" tabindex="-1" target="_blank"></a>    X <span class="op">*</span><span class="va">m_x</span><span class="op">;</span></span>
  <span id="cb31-52" class="link-block"><a href="#cb31-52" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb31-53" class="link-block"><a href="#cb31-53" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb31-54" class="link-block"><a href="#cb31-54" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> K</span>
  <span id="cb31-55" class="link-block"><a href="#cb31-55" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb31-56" class="link-block"><a href="#cb31-56" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb31-57" class="link-block"><a href="#cb31-57" aria-hidden="true" tabindex="-1" target="_blank"></a>    K<span class="op">()</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"K Ctor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="va">m_y</span><span class="op">=</span> <span class="kw">new</span> Y<span class="op">;</span> <span class="va">m_x</span><span class="op">=</span> <span class="kw">new</span> X<span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-58" class="link-block"><a href="#cb31-58" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">~</span>K<span class="op">()</span> <span class="op">{</span> cerr <span class="op">&lt;&lt;</span> <span class="st">"K Dtor"</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span> <span class="kw">delete</span> <span class="va">m_x</span><span class="op">;</span> <span class="kw">delete</span> <span class="va">m_y</span><span class="op">;</span> <span class="op">}</span></span>
  <span id="cb31-59" class="link-block"><a href="#cb31-59" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb31-60" class="link-block"><a href="#cb31-60" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y <span class="op">*</span><span class="va">m_y</span><span class="op">;</span></span>
  <span id="cb31-61" class="link-block"><a href="#cb31-61" aria-hidden="true" tabindex="-1" target="_blank"></a>    X <span class="op">*</span><span class="va">m_x</span><span class="op">;</span></span>
  <span id="cb31-62" class="link-block"><a href="#cb31-62" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb31-63" class="link-block"><a href="#cb31-63" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb31-64" class="link-block"><a href="#cb31-64" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb31-65" class="link-block"><a href="#cb31-65" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb31-66" class="link-block"><a href="#cb31-66" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">try</span></span>
  <span id="cb31-67" class="link-block"><a href="#cb31-67" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">{</span></span>
  <span id="cb31-68" class="link-block"><a href="#cb31-68" aria-hidden="true" tabindex="-1" target="_blank"></a>        L var1<span class="op">;</span></span>
  <span id="cb31-69" class="link-block"><a href="#cb31-69" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">}</span></span>
  <span id="cb31-70" class="link-block"><a href="#cb31-70" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">catch</span><span class="op">(</span>exception<span class="op">&amp;</span> e<span class="op">)</span></span>
  <span id="cb31-71" class="link-block"><a href="#cb31-71" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">{</span></span>
  <span id="cb31-72" class="link-block"><a href="#cb31-72" aria-hidden="true" tabindex="-1" target="_blank"></a>        cerr <span class="op">&lt;&lt;</span> <span class="st">"exception cout. what:"</span> <span class="op">&lt;&lt;</span> e<span class="op">.</span>what<span class="op">()</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
  <span id="cb31-73" class="link-block"><a href="#cb31-73" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="op">}</span></span>
  <span id="cb31-74" class="link-block"><a href="#cb31-74" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb31-75" class="link-block"><a href="#cb31-75" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb31-76" class="link-block"><a href="#cb31-76" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>a. Replace <code>var1</code>’s type in main by all the other defined
  types and investigate the results.</p>
  <p>b. Notice which Ctors and Dtors are executed.</p>
  <p>c. With which of the classes do we encounter a problem?</p>
  <p>d. What is the problem?</p>
  <p>e. Why aren’t the Dtors called?</p>
  <p>f. How can the problem be avoided? What is the new habit?</p></li>
  <li><p>​<strong>Time for Reference Counted String
  Exercise</strong></p></li>
  <li><p>​Inheritance dynamic allocation pitfall</p>
  <div class="sourceCode" id="cb32"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb32-1" class="link-block"><a href="#cb32-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> X</span>
  <span id="cb32-2" class="link-block"><a href="#cb32-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb32-3" class="link-block"><a href="#cb32-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb32-4" class="link-block"><a href="#cb32-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">virtual</span> <span class="op">~</span>X<span class="op">()</span> <span class="op">{}</span></span>
  <span id="cb32-5" class="link-block"><a href="#cb32-5" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb32-6" class="link-block"><a href="#cb32-6" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb32-7" class="link-block"><a href="#cb32-7" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">double</span> <span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb32-8" class="link-block"><a href="#cb32-8" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb32-9" class="link-block"><a href="#cb32-9" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb32-10" class="link-block"><a href="#cb32-10" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> Y<span class="op">:</span> <span class="kw">public</span> X</span>
  <span id="cb32-11" class="link-block"><a href="#cb32-11" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb32-12" class="link-block"><a href="#cb32-12" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb32-13" class="link-block"><a href="#cb32-13" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_b</span><span class="op">;</span></span>
  <span id="cb32-14" class="link-block"><a href="#cb32-14" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb32-15" class="link-block"><a href="#cb32-15" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb32-16" class="link-block"><a href="#cb32-16" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb32-17" class="link-block"><a href="#cb32-17" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb32-18" class="link-block"><a href="#cb32-18" aria-hidden="true" tabindex="-1" target="_blank"></a>    X <span class="op">*</span>xp<span class="op">=</span> <span class="kw">new</span> Y<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
  <span id="cb32-19" class="link-block"><a href="#cb32-19" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb32-20" class="link-block"><a href="#cb32-20" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">delete</span><span class="op">[]</span> xp<span class="op">;</span></span>
  <span id="cb32-21" class="link-block"><a href="#cb32-21" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb32-22" class="link-block"><a href="#cb32-22" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb32-23" class="link-block"><a href="#cb32-23" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>a. Why does it crash? Hints – try adding printouts of
  <code>this</code> in Ctors and Dtors, or removing
  <code>virtual</code>.</p>
  <p>b. What was the programmer's mistake? Why does it compile? What is
  the lesson learned?</p>
  <p>c. [Advanced]: Try changing the <code>m_a</code> member to be of type
  <code>int</code>. Explain the results.</p></li>
  <li><p>​Slicing – with the classes from the previous example:</p>
  <div class="sourceCode" id="cb33"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb33-1" class="link-block"><a href="#cb33-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">void</span> Foo<span class="op">(</span>X x<span class="op">);</span></span>
  <span id="cb33-2" class="link-block"><a href="#cb33-2" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb33-3" class="link-block"><a href="#cb33-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb33-4" class="link-block"><a href="#cb33-4" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb33-5" class="link-block"><a href="#cb33-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y y1<span class="op">;</span></span>
  <span id="cb33-6" class="link-block"><a href="#cb33-6" aria-hidden="true" tabindex="-1" target="_blank"></a>    Foo<span class="op">(</span>y1<span class="op">);</span></span>
  <span id="cb33-7" class="link-block"><a href="#cb33-7" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">...</span></span></code></pre></div>
  <p>a. What will the function <code>Foo()</code> actually receive?
  Investigate, and use the debugger.</p>
  <p>b. Why do we have this behavior?</p>
  <p>c. What existing habit would have protected us with real code? Think
  of real examples of inheritance.</p></li>
  <li><p>​Inheritance assignment pitfall</p>
  <div class="sourceCode" id="cb34"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb34-1" class="link-block"><a href="#cb34-1" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> X</span>
  <span id="cb34-2" class="link-block"><a href="#cb34-2" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb34-3" class="link-block"><a href="#cb34-3" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb34-4" class="link-block"><a href="#cb34-4" aria-hidden="true" tabindex="-1" target="_blank"></a>    X<span class="op">(</span><span class="dt">double</span> <span class="va">d_</span><span class="op">)</span> <span class="op">:</span><span class="va">m_a</span><span class="op">(</span><span class="va">d_</span><span class="op">)</span> <span class="op">{}</span></span>
  <span id="cb34-5" class="link-block"><a href="#cb34-5" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="kw">virtual</span> <span class="op">~</span>X<span class="op">()</span> <span class="op">{}</span></span>
  <span id="cb34-6" class="link-block"><a href="#cb34-6" aria-hidden="true" tabindex="-1" target="_blank"></a>    </span>
  <span id="cb34-7" class="link-block"><a href="#cb34-7" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb34-8" class="link-block"><a href="#cb34-8" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">double</span> <span class="va">m_a</span><span class="op">;</span></span>
  <span id="cb34-9" class="link-block"><a href="#cb34-9" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb34-10" class="link-block"><a href="#cb34-10" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb34-11" class="link-block"><a href="#cb34-11" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">class</span> Y<span class="op">:</span> <span class="kw">public</span> X</span>
  <span id="cb34-12" class="link-block"><a href="#cb34-12" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb34-13" class="link-block"><a href="#cb34-13" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">public</span><span class="op">:</span></span>
  <span id="cb34-14" class="link-block"><a href="#cb34-14" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y<span class="op">(</span><span class="dt">double</span> <span class="va">d_</span><span class="op">,</span> <span class="dt">int</span> <span class="va">i_</span><span class="op">):</span> X<span class="op">(</span><span class="va">d_</span><span class="op">),</span> <span class="va">m_b</span><span class="op">(</span><span class="va">i_</span><span class="op">)</span> <span class="op">{}</span></span>
  <span id="cb34-15" class="link-block"><a href="#cb34-15" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="kw">private</span><span class="op">:</span></span>
  <span id="cb34-16" class="link-block"><a href="#cb34-16" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="dt">int</span> <span class="va">m_b</span><span class="op">;</span></span>
  <span id="cb34-17" class="link-block"><a href="#cb34-17" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">};</span></span>
  <span id="cb34-18" class="link-block"><a href="#cb34-18" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb34-19" class="link-block"><a href="#cb34-19" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="dt">int</span> main<span class="op">()</span></span>
  <span id="cb34-20" class="link-block"><a href="#cb34-20" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">{</span></span>
  <span id="cb34-21" class="link-block"><a href="#cb34-21" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y y1<span class="op">(</span><span class="fl">0.0</span><span class="op">,</span> <span class="dv">0</span><span class="op">),</span> y2<span class="op">(</span><span class="fl">14.2</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
  <span id="cb34-22" class="link-block"><a href="#cb34-22" aria-hidden="true" tabindex="-1" target="_blank"></a>    Y y3<span class="op">(</span><span class="fl">0.0</span><span class="op">,</span> <span class="dv">0</span><span class="op">),</span> y4<span class="op">(</span><span class="fl">14.2</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
  <span id="cb34-23" class="link-block"><a href="#cb34-23" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb34-24" class="link-block"><a href="#cb34-24" aria-hidden="true" tabindex="-1" target="_blank"></a>    X <span class="op">&amp;</span>x1 <span class="op">=</span> y1<span class="op">;</span></span>
  <span id="cb34-25" class="link-block"><a href="#cb34-25" aria-hidden="true" tabindex="-1" target="_blank"></a>    X <span class="op">&amp;</span>x2 <span class="op">=</span> y2<span class="op">;</span></span>
  <span id="cb34-26" class="link-block"><a href="#cb34-26" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb34-27" class="link-block"><a href="#cb34-27" aria-hidden="true" tabindex="-1" target="_blank"></a>    x1 <span class="op">=</span> x2<span class="op">;</span></span>
  <span id="cb34-28" class="link-block"><a href="#cb34-28" aria-hidden="true" tabindex="-1" target="_blank"></a>    y3 <span class="op">=</span> y4<span class="op">;</span></span>
  <span id="cb34-29" class="link-block"><a href="#cb34-29" aria-hidden="true" tabindex="-1" target="_blank"></a></span>
  <span id="cb34-30" class="link-block"><a href="#cb34-30" aria-hidden="true" tabindex="-1" target="_blank"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
  <span id="cb34-31" class="link-block"><a href="#cb34-31" aria-hidden="true" tabindex="-1" target="_blank"></a><span class="op">}</span></span></code></pre></div>
  <p>a. Use the debugger to look at <code>y1</code> and <code>y3</code>
  after the assignments.</p>
  <p>b. What is wrong?</p>
  <p>c. Why did it happen?</p>
  <p>d. Why is it so wrong?</p>
  <p>e. Who is to blame?</p>
  <p>f. How can we avoid this situation? What is the new habit?</p></li>
  <li><p>​Virtual static binding</p>
  <p>The fact a function is virtual does not mean all calls are
  dynamically bound (using the virtual pointer and table at runtime).</p>
  <p>a. In which situations can the function be statically bound (where
  the compiler knows at compile time which function should be called)?</p>
  <p>b. What does it mean for <code>inline</code>?</p>
  <p>c. For what reoccurring function is this an issue?</p></li>
  <li><p>​Research and investigate: <code>protected</code> keyword</p>
  <p>a. What will you put in the protected part of the class?</p>
  <p>b. What will never go in the protected part?</p>
  <p>c. Why? Explain in encapsulation terms.</p></li>
  <li><p>​Research and investigate:</p>
  <ul>
  <li>Pure virtual method</li>
  <li>Abstract class</li>
  </ul>
  <p>a. Can you implement a pure virtual method? Why would you want to?
  When will you have to?</p>
  <p>b. What happens to a class that inherits an abstract class?</p>
  <p>c. What is the meaning of the syntax <code>=0</code>? (No, not an
  emoticon.)</p>
  <p>d. Why would you declare a Dtor pure virtual? Would you implement
  it?</p></li>
  <li><p>​Some Finalizers</p>
  <p>a. Why does a String class not have a virtual distructor?</p>
  <p>b. What is a <code>Clone()</code> function used for? Research
  it.</p></li>
  </ol>
  
  
  </div></div><script src="./node_modules/javascript-obfuscator/dist/index.browser.js"></script></div><script>!function(e){function r(r){for(var n,l,f=r[0],i=r[1],a=r[2],c=0,s=[];c<f.length;c++)l=f[c],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&s.push(o[l][0]),o[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(p&&p(r);s.length;)s.shift()();return u.push.apply(u,a||[]),t()}function t(){for(var e,r=0;r<u.length;r++){for(var t=u[r],n=!0,f=1;f<t.length;f++){var i=t[f];0!==o[i]&&(n=!1)}n&&(u.splice(r--,1),e=l(l.s=t[0]))}return e}var n={},o={1:0},u=[];function l(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=n,l.d=function(e,r,t){l.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,r){if(1&r&&(e=l(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)l.d(t,n,function(r){return e[r]}.bind(null,n));return t},l.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(r,"a",r),r},l.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},l.p="/";var f=this.webpackJsonpbrain_fuel=this.webpackJsonpbrain_fuel||[],i=f.push.bind(f);f.push=r,f=f.slice();for(var a=0;a<f.length;a++)r(f[a]);var p=i;t()}([])</script><script src="/static/js/2.36fe797c.chunk.js"></script><script src="/static/js/main.833bdb95.chunk.js"></script></body></html>